
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>Cookfront&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="cookfront@gmail.com">
    

    
    <meta name="description" content="Cookfront&apos;s Blog，前端开发，HTML，CSS，JavaScript，jQuery，HTML5，CSS3，Sass Compass，Node.js">
<meta property="og:type" content="website">
<meta property="og:title" content="Cookfront's Blog">
<meta property="og:url" content="http://cookfront.github.io/page/2/index.html">
<meta property="og:site_name" content="Cookfront's Blog">
<meta property="og:description" content="Cookfront&apos;s Blog，前端开发，HTML，CSS，JavaScript，jQuery，HTML5，CSS3，Sass Compass，Node.js">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cookfront's Blog">
<meta name="twitter:description" content="Cookfront&apos;s Blog，前端开发，HTML，CSS，JavaScript，jQuery，HTML5，CSS3，Sass Compass，Node.js">

    
    <link rel="alternative" href="/atom.xml" title="Cookfront&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Cookfront&#39;s Blog" title="Cookfront&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Cookfront&#39;s Blog">Cookfront&#39;s Blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜單">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:cookfront.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/01/18/css3-transform/" title="CSS3 Transform" itemprop="url">CSS3 Transform</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://cookfront.github.io/about" title="cookfront@gmail.com" target="_blank" itemprop="author">cookfront@gmail.com</a>
		
  <p class="article-time">
    <time datetime="2015-01-18T03:47:42.000Z" itemprop="datePublished"> 發表於 2015-01-18</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>本文是<a href="http://www.w3.org/TR/css-transforms-1/" target="_blank" rel="external">CSS Transforms Module Level 1</a>的翻译，翻译主要还是自己去熟悉标准、学习标准，最后再分享出来。文中如有读不通的地方可以移步官方文档哟，英语渣渣呀。</p>
<h2 id="摘要">摘要</h2><p><code>CSS</code>变换允许元素的样式在二维或三维空间变换。该规范集合了<a href="http://www.w3.org/TR/css3-2d-transforms/" target="_blank" rel="external">CSS 2D 变换</a>、<a href="http://www.w3.org/TR/css3-3d-transforms/" target="_blank" rel="external">CSS 3D 变换</a>和<a href="http://www.w3.org/TR/2009/WD-SVG-Transforms-20090320/" target="_blank" rel="external">SVG 变换</a>的规范。<a href="http://www.w3.org/TR/CSS/" target="_blank" rel="external">CSS</a>是一种用于在<code>screen</code>、<code>paper</code>等中描述结构化文档（例如：HTML和XML）的语言。</p>
<h2 id="1_介绍">1 介绍</h2><p><code>CSS</code>的<a href="http://www.w3.org/TR/REC-CSS2/visuren.html" target="_blank" rel="external">视觉格式化模型</a>在每一个定位元素里描述了一个坐标系统。在该坐标空间中的位置和大小可以被看作是以像素来表达，</p>
<p>这个坐标空间可以通过<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">transform</a>属性来修改。使用<code>transform</code>，元素可以在二维或三维空间转化，旋转和伸缩。</p>
<p>一些额外到属性使得变换更加简单，且允许作者控制如何与被嵌套的三维变换进行交互。</p>
<ul>
<li><a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-origin" target="_blank" rel="external"><code>transform-origin</code></a>属性提供了一种方便的控制被应用变换到元素变换时的原点的方法。</li>
<li><a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external"><code>perspective</code></a>属性允许作者使子元素与三维空间变换出现，就好像它们在一个共同的三维空间中一样。<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective-origin" target="_blank" rel="external">perspective-origin</a>属性提供了控制哪个透视被应用的原点，有效的改变了<code>消失点（vanishing point）</code>的位置。</li>
<li><a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-style" target="_blank" rel="external"><code>transform-style</code></a>允许3D变换的元素和它们3D变换的后代共享一个共同的三维空间，允许三维对象等级制度的构建。</li>
<li><a href="http://www.w3.org/TR/css-transforms-1/#propdef-backface-visibility" target="_blank" rel="external"><code>backface-visibility</code></a>属性</li>
</ul>
<blockquote>
<p>注意：然而<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">transform</a>属性的有些值允许一个元素在三维坐标系统中被变换，该元素自身却不是一个三维对象。作为替代，它们存在于一个两维平面（平坦面），并没有任何深度。</p>
</blockquote>
<h2 id="2_模块交互">2 模块交互</h2><p>该模块定义了一组CSS属性，它会影响应用了这些属性元素的视觉渲染；这些影响会在元素根据<a href="http://www.w3.org/TR/css-transforms-1/#css21" target="_blank" rel="external">CSS21</a>中<a href="http://www.w3.org/TR/CSS2/visuren.html" target="_blank" rel="external">视觉格式模型</a>确定尺寸和位置后被应用。这些属性的一些值会导致创建一个<a href="http://www.w3.org/TR/CSS2/visuren.html#containing-block" target="_blank" rel="external">包含块</a>，或<a href="http://www.w3.org/TR/CSS21/visuren.html#x43" target="_blank" rel="external">堆栈上下文</a>。</p>
<p>三维变换同样会影响到元素的视觉分层，并且因此会覆盖在<a href="http://www.w3.org/TR/css-transforms-1/#css21" target="_blank" rel="external">CSS21</a>中<a href="http://www.w3.org/TR/CSS2/zindex.html" target="_blank" rel="external">附录 E</a>中描述的从后到前的绘制顺序。</p>
<p>当元素的<a href="http://dev.w3.org/csswg/css-backgrounds-4/#background-attachment" target="_blank" rel="external">background-attachment</a>的值为<code>fixed</code>时，变换还会影响到元素背景的渲染，这个在<a href="http://www.w3.org/TR/css-transforms-1/#css3bg" target="_blank" rel="external"><br>CSS3BG</a>中被定义。</p>
<h2 id="3_CSS值">3 CSS值</h2><p>此规范遵循<a href="http://www.w3.org/TR/css-transforms-1/#css21" target="_blank" rel="external">CSS21</a>中<a href="http://www.w3.org/TR/CSS21/about.html#property-defs" target="_blank" rel="external">CSS属性定义约定</a>。值的类型在此规范中没有定义，而是定义在<a href="http://www.w3.org/TR/css-transforms-1/#css3val" target="_blank" rel="external">CSS Values and Units Module Level 3</a>中定义。</p>
<p>除了在它们的定义中列出的属性的特定值，在这个规范中定义的所有属性也接受了<a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit" target="_blank" rel="external">inherit</a>关键字作为他们的属性值。因为可读性原因，并未明确重复。</p>
<h2 id="4_术语">4 术语</h2><p>当在本规范中使用时，术语在本节被分配了含义。</p>
<p><strong>边界框（bounding box）</strong><br>边界框是一个对于没有关联<code>CSS</code>布局中的所有<code>SVG</code>元素的对象边界框和所有其他元素的边框(border box)。一个<code>table</code>的边界框是<a href="http://www.w3.org/TR/CSS21/tables.html#model" target="_blank" rel="external">table包含框</a>的边框，而不是它的<code>table</code>框。</p>
<p><strong>可变换元素（transformable element）</strong><br>一个可变换元素是下面一种类型的元素：</p>
<ul>
<li>一个元素的布局由<code>CSS</code>盒模型支配，且它是一个<a href="http://www.w3.org/TR/CSS2/visuren.html#block-level" target="_blank" rel="external">block-level</a>或<a href="http://www.w3.org/TR/CSS2/visuren.html#x13" target="_blank" rel="external">原子的inline-level</a>元素，或者它的<a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-display" target="_blank" rel="external">display</a>属性被计算成<code>table-row</code>、<code>table-row-group</code>、<code>table-header-group</code>、<code>table-footer-group</code>、<code>table-cell</code>或<code>table-caption</code></li>
<li>一个在<code>SVG</code>命名空间的元素，且它不受<code>CSS</code>盒模型支配，且它有属性<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">transform</a>、<a href="http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElementPatternTransformAttribute" target="_blank" rel="external">patternTransform</a>或<a href="http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElementGradientTransformAttribute" target="_blank" rel="external">gradientTransform</a></li>
</ul>
<p><strong>用户坐标系（user coordinate system）</strong><br><strong>局部坐标系（local coordinate system）</strong><br>在一般情况下，一个坐标系定义了当前画布上的位置和距离。当前局部坐标系（也包含用户坐标系）为当前活动的坐标系，这是用于定义坐标和长度如何被定位和计算，它们各自在当前画布中。</p>
<p><strong>透视矩阵（perspective matrix）</strong><br>从<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external">perspective</a>和<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective-origin" target="_blank" rel="external">perspective-origin</a>属性值中计算出来的矩阵，将在下面讲到。</p>
<p><strong>变换矩阵（transformation matrix）</strong><br>一个矩阵定义了数学上从一个坐标系映射到另一个。它是从<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">transform</a>和<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-origin" target="_blank" rel="external">transform-origin</a>属性的值计算而来，将在下面讲到。</p>
<p><strong>当前变换矩阵（current transformation matrix）</strong><br>一个矩阵定义了从局部坐标系到视口坐标系（viewport coordinate system）的映射。</p>
<p><strong>累计3D变换矩阵（accumulated 3D transformation matrix）</strong><br>一个矩阵从元素的<a href="http://www.w3.org/TR/css-transforms-1/#3d-rendering-context" target="_blank" rel="external">3D渲染上下文</a>中计算出来，将在下面讲到。</p>
<p><strong>2D矩阵（2D matrix）</strong><br>一个6个项的3<em>2的变换矩阵，或者是16个项的4</em>4矩阵且在这些项中m31, m32, m13, m23, m43, m14, m24, m34等于0，m33, m44等于1。</p>
<p><strong>3D矩阵（3D matrix）</strong><br>一个4*4的矩阵且不履行的2D矩阵的要求。</p>
<p><strong>特性变换函数（identity transform function）</strong><br>一个<a href="http://www.w3.org/TR/css-transforms-1/#transform-functions" target="_blank" rel="external">变换函数</a>其实等价于一个特性4*4矩阵（看这里：<a href="http://www.w3.org/TR/css-transforms-1/#mathematical-description" target="_blank" rel="external">Mathematical Description of Transform Functions</a>）。特性变换函数的例子有<code>translate(0)</code>、<code>translate3d(0, 0, 0)</code>、<code>translateX(0)</code>、<code>translateY(0)</code>、<code>translateZ(0)</code>、<code>scale(1)</code>、<code>scaleX(1)</code>、<code>scaleY(1)</code>、<code>scaleZ(1)</code>、<code>rotate(0)</code>、<code>rotate3d(1, 1, 1, 0)</code>、<code>rotateX(0)</code>、<code>rotateY(0)</code>、<code>rotateZ(0)</code>、<code>skew(0, 0)</code>、<code>skewX(0)</code>、<code>skewY(0)</code>、<code>matrix(1, 0, 0, 1, 0, 0)</code>和<code>matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)</code>。一种特别的情况是透视（perspective）：<code>perspective(infinity)</code>。<code>M34</code>的值变得无穷小，变换函数因此假定它等于单位矩阵。</p>
<p><strong>3D渲染上下文（3D rendering context）</strong><br>一个包含块层次结构的一个或多个水平，通过元素的<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-style" target="_blank" rel="external">transform-style</a>属性的<code>preserve-3d</code>计算值实例化，其元素有一个共同的三维坐标系。</p>
<h2 id="5_二维子集（Two_Dimensional_Subset）">5 二维子集（Two Dimensional Subset）</h2><p>用户代理可能不能总是渲染出三维变换，那么它们只支持该规范的一个二维子集。在这种情况下，<a href="http://www.w3.org/TR/css-transforms-1/#three-d-transform-functions" target="_blank" rel="external">三维变换</a>和<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-style" target="_blank" rel="external">transform-style</a>、<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external">perspective</a>、<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective-origin" target="_blank" rel="external">perspective-origin</a>和<a href="http://www.w3.org/TR/css-transforms-1/#propdef-backface-visibility" target="_blank" rel="external">backface-visibility</a>属性将不被支持。<a href="http://www.w3.org/TR/css-transforms-1/#3d-transform-rendering" target="_blank" rel="external">3D变换渲染</a>章节也不会应用到。矩阵分解使用从“图形宝石II，由吉姆·阿尔沃编辑”中的<code>unmatrix</code>的方法所采取的技术，简化为2D的情况。<a href="http://www.w3.org/TR/css-transforms-1/#mathematical-description" target="_blank" rel="external">Mathematical Description of Transform Functions</a>章节荏苒是有效的，只是它们减少为一个3*3的变换矩阵，其中<code>a</code>等于<code>m11</code>，<code>b</code>等于<code>m12</code>，<code>c</code>等于<code>m21</code>，<code>d</code>等于<code>m22</code>，<code>e</code>等于<code>m41</code>，<code>f</code>等于<code>m42</code>。</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/3x3matrix.png" alt="enter image description here"><br></center><br><center><br>图片一：二维变换的3*3矩阵<br></center>

<p><strong>实例一：</strong></p>
<p>如果用户代理不提供三维变换支持，作者可以很容易地提供一个备用方案。下面的例子中对于<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">transform</a>属性有两条属性定义。第一个定义包含了两个二维的变换函数。第二个包含了一个二维的和一个三维的变换函数。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">scale</span>(<span class="number">2</span>) <span class="function">rotate</span>(<span class="number">45deg</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">scale</span>(<span class="number">2</span>) <span class="function">rotate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">45deg</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>有了3D的支持，第二条定义会覆盖第一条。如果没有3D的支持，第二条定义是不合法的，用户代理会退回到第一条定义。</p>
<h2 id="6_变换渲染模型（The_Transform_Rendering_Model）">6 变换渲染模型（The Transform Rendering Model）</h2><p>当指定了一个除<a href="http://www.w3.org/TR/css-transforms-1/#none" target="_blank" rel="external">none</a>之外的<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">transform</a>属性值时在元素上建立了一个<a href="http://www.w3.org/TR/css-transforms-1/#local-coordinate-system" target="_blank" rel="external">局部坐标系</a>，并且它被应用。映射是从元素已经渲染到的局部坐标系中通过元素的<a href="http://www.w3.org/TR/css-transforms-1/#transformation-matrix" target="_blank" rel="external">变换矩阵</a>给定。变换是累积的。也就是说，元素在父坐标系中建立自己的局部坐标系。从用户的视角来看，一个元素有效地累积祖先的所有<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">变换</a>属性以及任何的局部变换被应用。这些变换的累积为元素定义了<a href="http://www.w3.org/TR/css-transforms-1/#current-transformation-matrix-ctm" target="_blank" rel="external">当前变换矩阵（current transformation matrix）</a>（CTM）。</p>
<p>坐标空间是有两个轴的一个坐标系：<code>X</code>轴是水平向右增加，<code>Y</code>轴是垂直向下增加。三维变换函数则扩展了这个坐标空间到三维，添加了垂直于屏幕平面一个<code>Z</code>轴，并且沿着观察者的方向增加。</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/coordinates.svg" alt="enter image description here"><br></center>

<center><br>图片2：初始坐标空间的示范<br></center>

<p><a href="http://www.w3.org/TR/css-transforms-1/#transformation-matrix" target="_blank" rel="external">变换矩阵</a>是通过<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">transform</a>和<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-origin" target="_blank" rel="external">transform-origin</a>通过以下步骤计算而来：</p>
<ol>
<li>通过特性矩阵开始</li>
<li>通过<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-origin" target="_blank" rel="external">transform-origin</a>的计算出的<code>X</code>，<code>Y</code>值来转换</li>
<li>从左到右乘以在<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">transform</a>属性中的每一个变换函数</li>
<li>通过<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-origin" target="_blank" rel="external">transform-origin</a>的负计算<code>X</code>，<code>Y</code>值来转换</li>
</ol>
<p>变换应用到<a href="http://www.w3.org/TR/css-transforms-1/#transformable-element" target="_blank" rel="external">可变换元素</a>上。</p>
<blockquote>
<p>注意：变换会影响画布上的视觉布局（visual layout），但对CSS布局本身没有影响。这也意味着不会影响在IE浏览器下的<a href="http://www.w3.org/TR/cssom-view/#dom-element-getclientrects" target="_blank" rel="external">getClientRects()</a>和标准浏览器的<a href="http://www.w3.org/TR/cssom-view/#dom-element-getboundingclientrect" target="_blank" rel="external">getBoundingClientRect()</a>函数的值。</p>
</blockquote>
<p><strong>实例二：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translate</span>(<span class="number">100px</span>, <span class="number">100px</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>上面的代码会将元素在<code>X</code>和<code>Y</code>方向上移动<code>100px</code>。</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/examples/translate1.svg" alt="enter image description here"><br></center>

<p><strong>实例三：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100px</span></span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">transform-origin</span>:<span class="value"> <span class="number">50px</span> <span class="number">50px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(<span class="number">45deg</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p><a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-origin" target="_blank" rel="external">transform-origin</a>属性将变换的原点在<code>X</code>和<code>Y</code>方向上分别移动了<code>50px</code>。旋转变换将元素以原点顺时针方向旋转45度。在所有的变换函数被应用后，原点的转化被转化为在<code>X</code>和<code>Y</code>方向上返回<code>-50px</code>。</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/examples/origin1.svg" alt="enter image description here"><br></center>

<p><strong>实例四：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100px</span></span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translate</span>(<span class="number">80px</span>, <span class="number">80px</span>) <span class="function">scale</span>(<span class="number">1.5</span>, <span class="number">1.5</span>) <span class="function">rotate</span>(<span class="number">45deg</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>该变换分别将元素在<code>X</code>和<code>Y</code>方向移动<code>80px</code>，然后将元素缩放150%，然后绕<code>Z</code>轴顺时针旋转45度。可以注意到缩放和旋转是以元素的中心来操作的，由于元素具有<code>50％ 50％</code>的默认变换原点。</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/examples/compound_transform.svg" alt="enter image description here"><br></center>

<blockquote>
<p>注意：一个相同的渲染可以通过用等效变换的嵌套元素来获得：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"transform: translate(80px, 80px)"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"transform: scale(1.5, 1.5)"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"transform: rotate(45deg)"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>对于布局是由CSS盒模型支配的元素，<code>transform</code>属性不影响变换元素周围的内容的流动。然而，溢出区域的范围考虑到了被变换元素。它的行为类似于元素通过相对定位来偏移时的情况。因此，如果<a href="http://www.w3.org/TR/css-overflow-3/#overflow" target="_blank" rel="external">overflow</a>属性的值为<code>scroll</code>或<code>auto</code>时，根据需要为了看到内容，滚动条会出现，因为被变换到了可视区域的外面。</p>
<p>对于布局是由CSS盒模型支配的元素，任何非<a href="http://www.w3.org/TR/css-transforms-1/#none" target="_blank" rel="external">none</a>值的<code>transform</code>会导致创建一个堆栈上下文和包含块。这个对象作为一个包含块，为它固定定位的后代。</p>
<p>在根元素上的<a href="http://www.w3.org/TR/css3-background/#fixed0" target="_blank" rel="external">固定背景</a>受到任何为那个元素被指定的变换的影响。对于任何其他元素被一个变换所影响（例如，应用一个变换到它们自身或者任何它们的祖先元素），当<a href="http://dev.w3.org/csswg/css-backgrounds-4/#background-attachment" target="_blank" rel="external">background-attachment</a>属性的值为<code>fixed</code>时，它会被认为好像值是<code>scroll</code>。<a href="http://dev.w3.org/csswg/css-backgrounds-4/#background-attachment" target="_blank" rel="external">background-attachment</a>的计算值不会受到影响。</p>
<h3 id="6-1_3D变换渲染（3D_Transform_Rendering）">6.1 3D变换渲染（3D Transform Rendering）</h3><p>通常情况下，元素是在平面上渲染，并且作为其包含块会被渲染到同一平面。通常，这个平面就是被页面其他部分共享的平面。二维变换函数可以改变的元素的呈现，但是元素仍然作为其包含块被渲染到同一平面。</p>
<p>三维变换可导致变换矩阵具有非零的<code>Z</code>分量。这会导致元素对于它的包含块渲染到不同到平面，这可能会导致影响那个元素相对于其他元素的从前到后的渲染顺序，以及会导致它与其他元素相交。这种行为取决于元素是否是<a href="http://www.w3.org/TR/css-transforms-1/#3d-rendering-context" target="_blank" rel="external">3D渲染上下文</a>中的一员，将在下面描述。</p>
<p><strong>实例五：</strong></p>
<p>这个例子展示了被应用了三维变换元素的效果。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.container</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid black</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#ccc</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.transformed</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(<span class="number">50deg</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> blue</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"transformed"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/examples/simple-3d-example.png" alt="enter image description here"><br></center>

<p>该变换沿着<code>Y</code>轴旋转了50度。可以注意到这会使蓝色的盒子更窄，但不是立体的。</p>
<p><a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external">perspective</a>和<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective-origin" target="_blank" rel="external">perspective-origin</a>属性可以被用于添加一种深度的感觉到场景中，它是使元素在<code>Z</code>轴更高（更接近观看者），从而会显得更大，那些远的将会显得更小。<code>d</code>缩放成比例于<code>d/(d − Z)</code>，<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external">perspective</a>的值，是从绘图平面（drawing plane）到观看者的眼睛假定位置的距离。</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/perspective_distance.png" alt="enter image description here"><br></center>

<center><br>图片3：示意图展示了缩放如何依赖于<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external">perspective</a>属性和<code>Z</code>的位置。在上面的示意图，<code>Z</code>是<code>d</code>的一半。为了使其显示的原始圆（实线轮廓）出现在Z（虚线圆），画布上的实体圆将扩大两倍，如浅蓝色的圆。在底部的示意图，圆按比例缩小，致使虚线圆出现在画布后面，并且z的大小是距原始位置三分之一。<br></center>

<p>通常情况下，观看者的眼睛的假定位置为图的中心。这个位置可以根据需要移动－例如，如果一个网页包含多个图形应该共享一个共同的视角，可以通过设置<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective-origin" target="_blank" rel="external">perspective-origin</a>。</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/perspective_origin.png" alt="enter image description here"><br></center>

<center><br>图片4：示意图展示了将视角上移的效果。<br></center>

<p><a href="http://www.w3.org/TR/css-transforms-1/#perspective-matrix" target="_blank" rel="external">透视矩阵</a>将按照以下来计算：</p>
<ol>
<li>通过特性矩阵开始</li>
<li>通过<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective-origin" target="_blank" rel="external">perspective-origin</a>的计算<code>X</code>，<code>Y</code>值来转换</li>
<li>乘以从<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external">perspective</a>变换函数获得的矩阵，其中长度是由<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external">perspective</a>属性的值提供</li>
<li>通过<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective-origin" target="_blank" rel="external">perspective-origin</a>的负计算<code>X</code>，<code>Y</code>值来转换</li>
</ol>
<p><strong>实例6：</strong></p>
<p>这个例子说明了<code>perspective</code>如何被用于一个三维变换，使其看起来更加真实。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.container</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">perspective</span>:<span class="value"> <span class="number">500px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid black</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.transformed</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(<span class="number">50deg</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> blue</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"transformed"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/examples/simple-perspective-example.png" alt="enter image description here"><br></center>

<p>内部的元素和前面的例子中是有着一样的变换，但它的渲染现在被它父元素的<code>perspective</code>属性影响。<code>perspective</code>导致有正的<code>Z</code>坐标（更接近观看者）的顶点在<code>X</code>和<code>Y</code>轴伸缩，使那些远离的按比例缩小，给人一种深度的感觉。</p>
<p>具有三维变换的元素，当它不包含在3D渲染上下文中，渲染时会有适当变换被应用，但不与任何其他元素相交。三维变换在这种情况下，可以被认为就像一个喷绘效果，就像二维变换。类似地，变换不影响绘制顺序。例如，一个正Z平移变换使元素看起来更大，但不会导致元素渲染到没有Z平移元素的前面。</p>
<p>具有三维变换的元素，当它包含在3D渲染上下文中，它可以明显的与在相同3D渲染上下文中的其他元素进行交互；参与到相同3D渲染上下文的元素集合可能会隐藏彼此或者相交，基于它们计算后的变换。它们被渲染就好像它们全是兄弟元素，定位在一个共同的三维坐标空间。在该三维空间中每个元素的位置由通过是对于给定元素是一个包含块的每个元素建立了3D渲染上下文的元素的变换矩阵的累积决定，将在下面描述。</p>
<p><strong>实例7：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.container</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">perspective</span>:<span class="value"> <span class="number">500px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid black</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.transformed</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(<span class="number">50deg</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> blue</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.child</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform-origin</span>:<span class="value"> top left</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateX</span>(<span class="number">40deg</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> lime</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"transformed"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个例子展示了在<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-style" target="_blank" rel="external">transform-style: preserve-3d</a>缺席的情况下嵌套的3D变换如何被渲染。蓝色的<code>div</code>就像前面例子中一样被变换，其渲染受到了父元素<code>perspective</code>的影响。绿黄色的元素也有一个3D变换，是一个绕<code>X</code>轴的旋转。然而，绿黄的元素被渲染到父元素到平面上，因为它不是3D渲染上下文的一个成员，父元素是扁平的。</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/examples/3d-rendering-context-flat.png" alt="enter image description here"><br></center>

<p>元素建立和参与到3D渲染上下文如下所示：</p>
<ul>
<li>一个<a href="http://www.w3.org/TR/css-transforms-1/#3d-rendering-context" target="_blank" rel="external">3D渲染上下文</a>由<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-style" target="_blank" rel="external">transform-style</a>属性的计算值为<code>preserve-3d</code>的<a href="http://www.w3.org/TR/css-transforms-1/#transformable-element" target="_blank" rel="external">可变换元素</a>建立，且它自身不是3D渲染上下文的一部分。需要注意的是这样的元素始终是一个包含块。一个建立了3D渲染上下文的元素同样会参与到那个上下文中。（这种就是上面的.container）</li>
<li>一个<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-style" target="_blank" rel="external">transform-style</a>属性的计算值为<code>preserve-3d</code>的元素，且它自身也参与到了一个3D渲染上下文，它扩展那个3D渲染上下文，而不是建立一个新的。</li>
<li>如果元素的包含块建立或扩展了3D渲染上下文，该元素则参与到了3D渲染上下文中。</li>
</ul>
<p>变换的最终值用于元素在3D渲染上下文中的渲染，这个最终值是由<a href="http://www.w3.org/TR/css-transforms-1/#accumulated-3d-transformation-matrix" target="_blank" rel="external">累计3D变换矩阵（accumulated 3D transformation matrix）</a>累积计算而来，下面计算步骤：</p>
<ol>
<li>通过特性矩阵开始</li>
<li>对于在3D渲染上下文的根和问题元素之间的任何包含块：<ol>
<li>将被累积的矩阵（accumulated matrix）乘以元素包含块上的透视矩阵（perspective matrix）（如果有包含块的话）。包含块不是必须为一个3D渲染上下文的成员。</li>
<li>应用被累积矩阵的平移，等价于元素相对于它的包含块在水平和垂直方向的偏移</li>
<li>将被累积的矩阵乘以<a href="http://www.w3.org/TR/css-transforms-1/#transformation-matrix" target="_blank" rel="external">变换矩阵</a></li>
</ol>
</li>
</ol>
<p><strong>实例8：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.container</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">perspective</span>:<span class="value"> <span class="number">500px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid black</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.transformed</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform-style</span>:<span class="value"> preserve-<span class="number">3</span>d</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(<span class="number">50deg</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> blue</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.child</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform-origin</span>:<span class="value"> top left</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateX</span>(<span class="number">40deg</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> lime</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个例子和前面的例子是相同的，只是在蓝色元素上额外添加了<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform-style" target="_blank" rel="external">transform-style: preserve-3d</a>属性。蓝色元素现在建立了一个3D渲染上下文，其中的绿黄元素就是一个成员。现在蓝色和绿黄元素共享共同的三维空间，所以绿黄元素渲染为从其父元素倾斜，是由容器的透视所影响。</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/examples/3d-rendering-context-3d.png" alt="enter image description here"><br></center>

<p>在相同的3D渲染上下文元素可以彼此相交。用户代理必须通过细分所描述的<a href="http://en.wikipedia.org/wiki/Newell%27s_algorithm" target="_blank" rel="external">纽维尔算法</a>交叉元素的面来渲染交集。</p>
<p>在3D渲染上下文中没有变换的元素在<code>Z=0</code>平面渲染，但仍可能与变换元素相交。</p>
<p>在一个3D渲染上下文内，非相交元素的渲染顺序是基于应用的被累积矩阵在<code>Z</code>轴上的位置。</p>
<p><strong>实例9：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">150px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.container</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="function">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">transform-style</span>:<span class="value"> preserve-<span class="number">3</span>d</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">perspective</span>:<span class="value"> <span class="number">500px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.container</span> &gt; <span class="tag">div</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.container</span> &gt; <span class="pseudo">:first-child</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(<span class="number">45deg</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> orange</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">135px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.container</span> &gt; <span class="pseudo">:last-child</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateZ</span>(<span class="number">40px</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="function">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>, <span class="number">0.75</span>)</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>该例子展示了元素在3D上下文中可以相交，容器元素为它自身和两个孩子建立了3D渲染上下文。孩子互相相交，且橘色多元素与容器相交。（目前浏览器支持还不是很好，可能看不到下面图片的效果）</p>
<center><br><img src="http://www.w3.org/TR/css-transforms-1/examples/3d-intersection.png" alt="enter image description here"><br></center>

<p>使用三维变换，有可能将元素变换的反面朝向观看者。3D变换元素在两侧显示相同的内容，所以背面看起来像前面的镜像。通常情况下，元素的反面朝向观看者并保持可见。然而，<a href="http://www.w3.org/TR/css-transforms-1/#propdef-backface-visibility" target="_blank" rel="external">backface-visibility</a>属性允许作者使元素不可见，当元素的背面朝向观看者的时候。这种行为是<code>生动</code>的；如果一个<a href="http://www.w3.org/TR/css-transforms-1/#propdef-backface-visibility" target="_blank" rel="external">backface-visibility: hidden</a>的元素正在动画，使得其正面和反面分别交替地可见，此时只有当正面朝向观察者的时候才是可见的。</p>
<h3 id="6-2_透视变换盒的处理（Processing_of_Perspective-Transformed_Boxes）">6.2 透视变换盒的处理（Processing of Perspective-Transformed Boxes）</h3><p><a href="http://www.w3.org/TR/css-transforms-1/#accumulated-3d-transformation-matrix" target="_blank" rel="external">累计3D变换矩阵（accumulated 3D transformation matrix）</a>是一个4*4的矩阵，而将被变换的对象是二维盒子。要变换盒子的每个脚（a, b）</p>
<p>// todo</p>
<h2 id="7_transform属性">7 <code>transform</code>属性</h2><p>一个变换被应用到坐标系的元素是通过<code>transform</code>属性来渲染。这个属性包含了一个<a href="http://www.w3.org/TR/css-transforms-1/#transform-functions" target="_blank" rel="external">变换函数</a>列表。一个坐标系的最终变换值是将列表中的每个函数转换其相应的矩阵来取得的，就像在<a href="http://www.w3.org/TR/css-transforms-1/#mathematical-description" target="_blank" rel="external">变换函数的数学描述</a>中定义的，然后将这些矩阵相乘。</p>
<ul>
<li>名称：<code>transform</code></li>
<li>取值：<code>none | &lt;transform-list&gt;</code></li>
<li>初始值：<code>none</code></li>
<li>应用于：<a href="http://www.w3.org/TR/css-transforms-1/#transformable-element" target="_blank" rel="external">可变换元素</a></li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值，相对的值会转化成绝对值</li>
<li>百分比：相对于<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>的尺寸</li>
</ul>
<p>对于变换的结果，任何除了<a href="http://www.w3.org/TR/css-transforms-1/#none" target="_blank" rel="external"><code>none</code></a>的计算值会创建一个堆栈上下文和包含块。这个对象会为它固定定位的后代扮演包含块的角色。</p>
<p>上面取值的<code>&lt;transform-list&gt;</code>为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;transform-<span class="built_in">list</span>&gt; = &lt;transform-function&gt;+</span><br></pre></td></tr></table></figure>
<h2 id="8_transform-origin属性">8 <code>transform-origin</code>属性</h2><ul>
<li>名称：<code>transform-origin</code></li>
<li><p>取值：<code>[ left | center | right | top | bottom | &lt;percentage&gt; | &lt;length&gt; ]
| 
[ left | center | right | &lt;percentage&gt; | &lt;length&gt; ]
[ top | center | bottom | &lt;percentage&gt; | &lt;length&gt; ] &lt;length&gt;?
|
[ center | [ left | right ] ] &amp;&amp; [ center | [ top | bottom ] ] &lt;length&gt;?</code></p>
</li>
<li><p>初始值：<code>50% 50%</code></p>
</li>
<li>应用于：<a href="http://www.w3.org/TR/css-transforms-1/#transformable-element" target="_blank" rel="external">可变换元素</a></li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：对于<code>&lt;length&gt;</code>的取值为绝对值，否则为百分比</li>
<li>百分比：相对于<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>的尺寸</li>
<li>能否动画：一个<a href="http://dev.w3.org/csswg/css3-transitions/#animtype-lpcalc" target="_blank" rel="external">长度、百分比或计算值</a>的<a href="http://dev.w3.org/csswg/css3-transitions/#animtype-simple-list" target="_blank" rel="external">简单列表</a></li>
</ul>
<p>对于<code>SVG</code>元素没有关联的<code>CSS</code>布局框时该属性默认值为<code>0 0</code>。</p>
<p><code>transform</code>和<code>transform-origin</code>属性的值是被用于计算<a href="http://www.w3.org/TR/css-transforms-1/#transformation-matrix" target="_blank" rel="external">变换矩阵</a>，像上面描述的一样。</p>
<p>如果只指定了一个值，第二个被假设为<code>center</code>。如果指定了一个或两个值，第三个值被假设为<code>0px</code>。</p>
<p>如果定义了两个或多个值时，或者这些值没有一个关键字时，或只使用了<code>center</code>关键字，然后第一个关键字代表水平位置，第二个关键字代表垂直位置。第三个值代表<code>Z</code>轴位置且它必须是<code>&lt;length&gt;</code>类型。</p>
<p>属性值的意义：</p>
<p><strong><code>&lt;percentage&gt;</code></strong><br> 对于水平偏移的百分比是相对于<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>的宽度，对于垂直偏移的百分比是相对于<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>的高度。水平和垂直的偏移值代表了从<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>左上角的偏移。</p>
<p> <strong><code>&lt;length&gt;</code></strong><br> 一个<code>length</code>值给出了固定的长度作为偏移。水平和垂直的偏移值代表了从<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>左上角的偏移。</p>
<p>对于<code>SVG</code>元素没有关联的<code>CSS</code>布局框时水平和垂直的偏移值代表了从元素的局部坐标空间的原点的偏移。</p>
<p><strong>top</strong><br>计算为垂直位置的<code>0%</code></p>
<p><strong>right</strong><br>计算为水平位置的<code>100%</code></p>
<p><strong>bottom</strong><br>计算为垂直位置的<code>100%</code></p>
<p><strong>left</strong><br>计算为水平位置的<code>0%</code></p>
<p><strong>center</strong><br>当水平位置没有指定时计算为水平位置的<code>50%</code>，或垂直位置的<code>50%</code></p>
<h2 id="9_transform-style属性">9 <code>transform-style</code>属性</h2><ul>
<li>名称：<code>transform-style</code></li>
<li>取值：<code>flat | preserve-3d</code></li>
<li>初始值：<code>flat</code></li>
<li>应用于：<a href="http://www.w3.org/TR/css-transforms-1/#transformable-element" target="_blank" rel="external">可变换元素</a></li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值</li>
<li>百分比：<code>N/A</code></li>
<li>可动画：否</li>
</ul>
<p><code>transform-style</code>的<code>preserve-3d</code>值会创建一个堆栈上下文。</p>
<p>下面的<code>CSS</code>属性值要求用户代理在被应用之前创建后代元素的扁平表示，所以会覆盖<code>transform-style: preserve-3d</code>的行为。</p>
<ul>
<li><a href="http://www.w3.org/TR/css-overflow-3/#overflow" target="_blank" rel="external"><code>overflow</code></a>：除了<code>visible</code>的任何值</li>
<li><a href="http://www.w3.org/TR/filter-effects/#effects" target="_blank" rel="external"><code>filter</code></a>：除了<code>none</code>的任何值</li>
<li><a href="http://www.w3.org/TR/css-masking/#propdef-clip" target="_blank" rel="external"><code>clip</code></a>：除了<code>auto</code>的任何值</li>
<li><a href="http://www.w3.org/TR/css-masking/#propdef-clip-path" target="_blank" rel="external"><code>clip-path</code></a>：除了<code>none</code>的任何值</li>
<li><a href="http://www.w3.org/TR/compositing-1/#propdef-isolation" target="_blank" rel="external"><code>isolation</code></a>：使用值<code>isolate</code></li>
<li><a href="http://www.w3.org/TR/css-masking/#propdef-mask-image" target="_blank" rel="external"><code>mask-image</code></a>：除了<code>none</code>的任何值</li>
<li><a href="http://www.w3.org/TR/css-masking/#propdef-mask-box-image-source" target="_blank" rel="external"><code>mask-box-image-source</code></a>：除了<code>none</code>的任何值</li>
<li><a href="http://www.w3.org/TR/compositing-1/#propdef-mix-blend-mode" target="_blank" rel="external"><code>mix-blend-mode</code></a>：除了<code>normal</code>的任何值</li>
</ul>
<p><code>transform-style</code>的计算值不会被影响。</p>
<p><code>transform</code>和<code>transform-origin</code>属性的值是被用于计算<a href="http://www.w3.org/TR/css-transforms-1/#transformation-matrix" target="_blank" rel="external">变换矩阵</a>，像上面描述的一样。</p>
<h2 id="10_perspective属性">10 <code>perspective</code>属性</h2><ul>
<li>名称：<code>perspective</code></li>
<li>取值：<code>none | &lt;length&gt;</code></li>
<li>初始值：<code>none</code></li>
<li>应用于：<a href="http://www.w3.org/TR/css-transforms-1/#transformable-element" target="_blank" rel="external">可变换元素</a></li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：绝对长度或none</li>
<li>百分比：<code>N/A</code></li>
<li>可否动画：同<a href="http://dev.w3.org/csswg/css3-transitions/#animtype-length" target="_blank" rel="external">length</a></li>
</ul>
<p><code>&lt;length&gt;</code>的值必须是正数的。</p>
<p>属性值的意义：</p>
<p><strong><code>&lt;length&gt;</code></strong><br>距离投影中心的距离。</p>
<p><strong><code>none</code></strong><br>没有透视变换被应用。它的效果类似于一个无穷大的<code>&lt;length&gt;</code>值。所有的对象在画布上呈平面显示。</p>
<p>使用这个属性的非<code>none</code>值时会建立一个堆栈上下文。它同样建立了一个包含块，就像<a href="http://www.w3.org/TR/css-transforms-1/#propdef-transform" target="_blank" rel="external">transform</a>属性一样。</p>
<p><a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external">perspective</a>和<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective-origin" target="_blank" rel="external">perspective-origin</a>属性的值是用于计算<a href="http://www.w3.org/TR/css-transforms-1/#perspective-matrix" target="_blank" rel="external">透视矩阵</a>，就如上面描述的。</p>
<h2 id="11_perspective-origin属性">11 <code>perspective-origin</code>属性</h2><ul>
<li>名称：<code>perspective-origin</code></li>
<li><p>取值：<code>[ left | center | right | top | bottom | &lt;percentage&gt; | &lt;length&gt; ]
| 
[ left | center | right | &lt;percentage&gt; | &lt;length&gt; ]
[ top | center | bottom | &lt;percentage&gt; | &lt;length&gt; ] &lt;length&gt;?
|
[ center | [ left | right ] ] &amp;&amp; [ center | [ top | bottom ] ] &lt;length&gt;?</code></p>
</li>
<li><p>初始值：<code>50% 50%</code></p>
</li>
<li>应用于：<a href="http://www.w3.org/TR/css-transforms-1/#transformable-element" target="_blank" rel="external">可变换元素</a></li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：对于<code>&lt;length&gt;</code>的取值为绝对值，否则为百分比</li>
<li>百分比：相对于<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>的尺寸</li>
<li>能否动画：一个<a href="http://dev.w3.org/csswg/css3-transitions/#animtype-lpcalc" target="_blank" rel="external">长度、百分比或计算值</a>的<a href="http://dev.w3.org/csswg/css3-transitions/#animtype-simple-list" target="_blank" rel="external">简单列表</a></li>
</ul>
<p><a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective" target="_blank" rel="external">perspective</a>和<a href="http://www.w3.org/TR/css-transforms-1/#propdef-perspective-origin" target="_blank" rel="external">perspective-origin</a>属性的值是用于计算<a href="http://www.w3.org/TR/css-transforms-1/#perspective-matrix" target="_blank" rel="external">透视矩阵</a>，就如上面描述的。</p>
<p>如果只指定了一个值，第二个被假设为<code>center</code>。</p>
<p>如果两个值中至少一个不是关键字，第一个关键字代表水平位置，第二个关键字代表垂直位置。</p>
<p><code>perspective-origin</code>的值代表了从<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>左上角透视原点的一个偏移。</p>
<p><strong><code>&lt;percentage&gt;</code></strong><br> 对于水平偏移的百分比是相对于<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>的宽度，对于垂直偏移的百分比是相对于<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>的高度。水平和垂直的偏移值代表了从<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>左上角的偏移。</p>
<p> <strong><code>&lt;length&gt;</code></strong><br> 一个<code>length</code>值给出了固定的长度作为偏移。水平和垂直的偏移值代表了从<a href="http://www.w3.org/TR/css-transforms-1/#bounding-box" target="_blank" rel="external">边界框</a>左上角的偏移。</p>
<p><strong>top</strong><br>计算为垂直位置的<code>0%</code></p>
<p><strong>right</strong><br>计算为水平位置的<code>100%</code></p>
<p><strong>bottom</strong><br>计算为垂直位置的<code>100%</code></p>
<p><strong>left</strong><br>计算为水平位置的<code>0%</code></p>
<p><strong>center</strong><br>当水平位置没有指定时计算为水平位置的<code>50%</code>，或垂直位置的<code>50%</code></p>
<h2 id="12_backface-visibility属性">12 <code>backface-visibility</code>属性</h2><p><code>backface-visibility</code>属性决定了当一个被变换元素的背面朝向观看者时背面是否可见。使用特性矩阵，元素的前面是朝向观看者的。当应用了一个绕<code>Y</code>轴旋转180度的变换时背面朝向了观看者。</p>
<ul>
<li>名称：<code>backface-visibility</code></li>
<li>取值：<code>visible | hidden</code></li>
<li>初始值：<code>visible</code></li>
<li>应用于：<a href="http://www.w3.org/TR/css-transforms-1/#transformable-element" target="_blank" rel="external">可变换元素</a></li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定值</li>
<li>百分比：<code>N/A</code></li>
<li>可否动画：否</li>
</ul>
<p>一个<code>backface-visibility: hidden</code>的元素的可见性由以下决定：</p>
<ol>
<li>对于一个在<a href="http://www.w3.org/TR/css-transforms-1/#3d-rendering-context" target="_blank" rel="external">3D渲染上下文</a>的元素，计算它的累积3D变换矩阵。对于一个不在<a href="http://www.w3.org/TR/css-transforms-1/#3d-rendering-context" target="_blank" rel="external">3D渲染上下文</a>的元素，计算它的<a href="http://www.w3.org/TR/css-transforms-1/#transformation-matrix" target="_blank" rel="external">变换矩阵</a></li>
<li>如果矩阵的第三行第三列是负数的，则元素应该被隐藏。否则它是可见的。</li>
</ol>
<h2 id="13_SVG的transform属性">13 SVG的<code>transform</code>属性</h2><h2 id="14_SVG动画">14 SVG动画</h2><p>这两个章节没有翻译，有兴趣的自行研究哟。<a href="http://www.w3.org/TR/css-transforms-1/#svg-transform" target="_blank" rel="external">SVG</a></p>
<h2 id="15_变换函数">15 变换函数</h2><p><code>transform</code>属性的值一个<code>&lt;transform-function&gt;</code>的列表。允许的变换函数集合在下面给出了。当在该规范中<a href="http://www.w3.org/TR/css3-values/#angle-value" target="_blank" rel="external"><code>&lt;angle&gt;</code></a>被使用时，一个等价于0的<a href="http://www.w3.org/TR/css3-values/#number-value" target="_blank" rel="external"><code>&lt;number&gt;</code></a>是同样被允许的，它被认为是角度0一样。</p>
<h3 id="15-1_2D变换函数">15.1 2D变换函数</h3><p><a href="http://www.w3.org/TR/css-transforms-1/#two-d-transform-functions" target="_blank" rel="external">2D Transform Functions</a></p>
<h3 id="15-2_3D变换函数">15.2 3D变换函数</h3><p><a href="http://www.w3.org/TR/css-transforms-1/#three-d-transform-functions" target="_blank" rel="external">3D Transform Functions</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/CSS/">CSS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/CSS3/">CSS3</a><a href="/tags/Transform/">Transform</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/01/18/css3-transform/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/01/18/css3-transform/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/01/13/css-flexbox/" title="CSS3 Flexbox" itemprop="url">CSS3 Flexbox</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://cookfront.github.io/about" title="cookfront@gmail.com" target="_blank" itemprop="author">cookfront@gmail.com</a>
		
  <p class="article-time">
    <time datetime="2015-01-13T03:47:42.000Z" itemprop="datePublished"> 發表於 2015-01-13</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>这篇文章主要是<code>W3C</code>官方<a href="http://www.w3.org/TR/css-flexbox-1/" target="_blank" rel="external">CSS Flexible Box Layout Module Level 1</a>的学习，内容可能有删减。<code>Flex</code>绝对是<code>CSS</code>未来布局的趋势，有了<code>Flex</code>什么垂直居中、水平居中、响应式等都是小菜一碟了。所以把它彻底搞懂还是很有必要的，文章比较长，不过如果能耐心的读完，对<code>Flex</code>肯定会有一个透彻的了解。</p>
<h2 id="摘要">摘要</h2><p>这份规范描述了为用户界面设计而优化的框模型（<code>box model</code>）。在<code>Flex</code>布局模型中，<code>flex</code>容器的孩子可以布置在任何方向，并且能<code>伸缩</code>它们的尺寸，它们可以伸展它们的尺寸以此填充未使用的空间，或者收缩它们的尺寸以避免溢出父元素。对于子元素的水平和垂直对齐将变得非常容易操作。这些框嵌套（水平内垂直或垂直内水平）可用于在两个维度来构建布局。</p>
<h2 id="1_介绍">1 介绍</h2><p><code>CSS 2.1</code>定义了四种布局模式－确定它们尺寸以及位置的算法是基于它们与兄弟和祖先盒子的关系：</p>
<ul>
<li><code>block</code>布局：为文档（document）布局而设计</li>
<li><code>inline</code>布局：为文本布局而设计</li>
<li><code>table</code>布局：为以表格形式的二维数据的布局而设计</li>
<li><code>position</code>布局：为非常明确的定位，且不考虑文档中的其他元素的布局而设计</li>
</ul>
<p>该模块引入了一个新的布局模式，<strong><code>flex</code>布局</strong>，它是为更加复杂的应用和网页而设计的。</p>
<h3 id="1-1_概述">1.1 概述</h3><p><code>flex</code>布局表面上类似于<code>block</code>布局。它缺少许多在<code>block</code>布局中使用的更复杂的以文本(<code>text-</code>)和文档(<code>document-</code>)为中心的属性，例如<a href="http://www.w3.org/TR/CSS21/visuren.html#floats" target="_blank" rel="external">floats</a>和<a href="http://www.w3.org/TR/css3-multicol/" target="_blank" rel="external">columns</a>。作为回报，它获得了简单和更加强大的工具，使它能以多种方式来分配空间和对齐内容，而这些就是web应用和网页所需要的。以下是<code>flex</code>容器的内容：</p>
<ul>
<li>它可以在任何方向上布局（向左，向右，向下，甚至向上！）</li>
<li>可以将显示的内容顺序<a href="http://www.w3.org/TR/css-flexbox-1/#valdef-flex-direction-row-reverse" target="_blank" rel="external">颠倒</a>（<code>flex-direction: row-reverse</code>）或者<a href="http://www.w3.org/TR/css-flexbox-1/#order-property" target="_blank" rel="external">重新安排</a>它们的顺序（<code>order</code>）</li>
<li>可以线性布局在单个（<a href="http://www.w3.org/TR/css-flexbox-1/#main-axis" target="_blank" rel="external">主</a>）轴，也可以沿（<a href="http://www.w3.org/TR/css-flexbox-1/#cross-axis" target="_blank" rel="external">侧</a>）轴<a href="http://www.w3.org/TR/css-flexbox-1/#flex-wrap-property" target="_blank" rel="external">包裹</a>在多行中</li>
<li>可以<code>伸缩</code>它们的尺寸以响应可用的空间</li>
<li>能够相对于它们的容器<a href="http://www.w3.org/TR/css-flexbox-1/#alignment" target="_blank" rel="external">对齐</a>，或者彼此对齐</li>
<li>可以动态的沿着主轴折叠或不折叠，同时保持容器的侧轴尺寸</li>
</ul>
<h3 id="1-2_模块交互">1.2 模块交互</h3><p>该模块扩展了<code>[CSS21]</code>中<code>display</code>属性的定义，添加了新的<code>block-level</code>和<code>inline-level</code>的<code>display</code>类型，并且定义一个新的类型的格式化上下文连同属性来控制其布局。该模块中定义的属性都不能应用在<code>::first-line</code>和<code>::first-letter</code>伪元素中。</p>
<h2 id="2_Flex布局盒模型以及术语">2 <code>Flex</code>布局盒模型以及术语</h2><p>一个<code>flex</code>容器是一个元素<a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-display" target="_blank" rel="external"><code>display</code></a>属性的计算值为<a href="http://www.w3.org/TR/css-flexbox-1/#valdef-display-flex" target="_blank" rel="external"><code>flex</code></a>或<a href="http://www.w3.org/TR/css-flexbox-1/#valdef-display-inline-flex" target="_blank" rel="external"><code>inline-flex</code></a>时，生成的盒子。在<code>flex</code>容器内的常规流子元素，称之为<code>flex items</code>，并且使用<code>flex</code>布局模型来布局。</p>
<p>不同于<code>block</code>和<code>inline</code>布局，它们的布局是基于<code>block</code>和<code>inline</code>流的方向来计算的，而对于<code>flex</code>布局，是基于<code>flex directions</code>（flex方向？）的。为了更容易简单的说明<code>flex</code>布局，本节中定义了一组<code>flex</code>相关的<code>flow-relative</code>术语。<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex-flow" target="_blank" rel="external"><code>flex-flow</code></a>的值决定了这些术语如何映射到物理方向（上/右/下/左），轴（垂直/水平），以及尺寸（宽/高）。</p>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/flex-direction-terms.svg" alt="enter image description here"></p>
<p><strong>主轴（main axis）</strong><br><strong>主轴维度（main dimension）</strong><br><code>flex</code>容器的主轴，伸缩项目（flex items）主要沿着这条轴进行排列布局</p>
<p><strong>主轴起点（main-start）</strong><br><strong>主轴终点(main-end)</strong><br>伸缩项目放置在<code>flex</code>容器内从主轴起点（main-start）向主轴终点（main-start）方向</p>
<p><strong>主轴尺寸（main size）</strong><br><strong>主轴尺寸属性（main size property）</strong><br>一个伸缩项目的宽度或高度，它是在<code>主轴维度（main dimension）</code>里面的，且是项目的<code>主尺寸</code>。伸缩项目的<code>主尺寸属性</code>是<code>宽度</code>或<code>高度</code>属性，它是在<code>主轴维度（main dimension）</code>里面的。</p>
<p><strong>侧轴（cross axis）</strong><br><strong>侧轴维度（cross dimension）</strong><br>垂直于主轴称为侧轴。它的方向主要取决于主轴方向</p>
<p><strong>侧轴起点（cross-start）</strong><br><strong>侧轴终点(cross-end)</strong><br>伸缩行的配置从容器的侧轴起点边开始，往侧轴终点边结束</p>
<p><strong>侧轴尺寸（cross size）</strong><br><strong>侧轴尺寸属性（cross size property）</strong><br>一个伸缩项目的宽度或高度，它是在<code>侧轴维度（main dimension）</code>里面的，且是项目的<code>主尺寸</code>。伸缩项目的<code>侧轴尺寸属性</code>是<code>宽度</code>或<code>高度</code>属性，它是在<code>侧轴维度（main dimension）</code>里面的。</p>
<h2 id="3_Flex容器：display属性为flex或inline-flex">3 Flex容器：<code>display</code>属性为<code>flex</code>或<code>inline-flex</code></h2><ul>
<li>名称：<code>display</code></li>
<li>取值：<code>flex ｜ inline-flex</code></li>
</ul>
<p>属性取值的意义：</p>
<ul>
<li>flex：该值使元素生成一个<code>block-level</code>的<code>flex</code>容器盒子</li>
<li>inline-flex：该值使元素生成一个<code>inline-level</code>的<code>flex</code>容器盒子</li>
</ul>
<p>一个<code>flex</code>容器为它的内容建立了一个新的<code>flex</code>格式上下文。这和建立块级上下文是相同的，不同之处在于<code>flex</code>布局是用于代替<code>block</code>布局的：浮动不会闯入到<code>flex</code>容器中，并且<strong><code>flex</code>容器到外边距也不会与其内容的外边距折叠</strong>。<code>Flex</code>容器为它的内容形成一个包含块，就像块容器一样。<a href="http://www.w3.org/TR/css-overflow-3/#overflow" target="_blank" rel="external">overflow</a>属性是可以应用于<code>flex</code>容器的。</p>
<p><code>Flex</code>容器不是块容器（block containers），所以一些假定为<code>block</code>布局而设计的属性是不能应用于<code>flex</code>布局的。特别是：</p>
<ul>
<li>所有的在多列模块中的<code>column-*</code>属性对<code>flex</code>容器是不起作用的</li>
<li><a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-float" target="_blank" rel="external"><code>float</code></a>和<a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-clear" target="_blank" rel="external"><code>clear</code></a>属性对<a href="http://www.w3.org/TR/css-flexbox-1/#flex-item" target="_blank" rel="external">伸缩项目</a>是不起作用的，也不会使它脱离常规流。然而<code>float</code>属性仍然会影响盒子的<code>display</code>属性的计算值。具体怎么影响<a href="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo" target="_blank" rel="external">Relationships between ‘display’, ‘position’, and ‘float’</a></li>
<li><a href="http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align" target="_blank" rel="external"><code>vertical-align</code></a>对伸缩项目是不起作用的</li>
<li><code>::first-line</code>和<code>::first-letter</code>伪元素是不可以应用于<code>flex</code>容器的，并且<code>flex</code>容器也不会为它的祖先贡献第一格式化行或首字母</li>
</ul>
<p>如果一个元素的<code>display</code>属性指定为<code>inline-flex</code>时，在某些情况下，它的<code>display</code>属性会被计算为<code>flex</code>：<a href="http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo" target="_blank" rel="external">CSS 2.1 章节9.7</a>中的<code>Table</code>会被修改为包含一个附加行，当它指定值为<code>inline-flex</code>时，会被计算为<code>flex</code>。</p>
<h2 id="4_伸缩项目(flex_items)">4 伸缩项目(flex items)</h2><p>不严格地说，伸缩容器（flex containers）的伸缩项目是从元素内容生成的常规流盒子，从而进一步生成了伸缩容器。</p>
<p>每一个伸缩容器的常规流子元素会变成一个伸缩项目，并且包含在伸缩容器中的每个连续运行的文本会被包裹在一个匿名的伸缩项目中。然而，一个匿名的伸缩项目仅仅只包含空白时，它并不会被渲染出来，就好像它被设置了<code>display: none</code>一样。</p>
<p>一个伸缩项目为它的内容建立了一个新的格式上下文，像通常一样，它的格式上下文的类型是由它的<code>display</code>属性决定的。然而，伸缩项目是<code>flex-level</code>盒子，而不是<code>block-level</code>盒子：它们参与到了它们容器到<code>flex</code>格式上下文中，而不是块级格式上下文。</p>
<p><strong>实例：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"display:flex"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- flex item: block child --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"item1"</span>&gt;</span>block<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- flex item: floated element; floating is ignored --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"item2"</span> <span class="attribute">style</span>=<span class="value">"float: left;"</span>&gt;</span>float<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- flex item: anonymous block box around inline content --&gt;</span></span><br><span class="line">    anonymous item 3</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- flex item: inline child --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">span</span>&gt;</span></span><br><span class="line">        item 4</span><br><span class="line">        <span class="comment">&lt;!-- flex items do not split around blocks --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">not-an-item</span>&gt;</span>item 4<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">        item 4</span><br><span class="line">    <span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果一个元素的常规流子元素指定的<a href="http://www.w3.org/TR/2014/WD-css-display-3-20140911/#propdef-display-outside" target="_blank" rel="external">display-outside</a>生成的伸缩容器是<code>inline-level</code>，它将会计算成<code>block-level</code>。</p>
<p>在一个设置了<code>display: table</code>的伸缩项目上，该<code>table</code>的包装盒子会变成一个伸缩项目，并且<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-order" target="_blank" rel="external"><code>order</code></a>和<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-align-self" target="_blank" rel="external"><code>align-self</code></a>属性可以应用到它。任何标题框的内容会贡献到<code>table</code>包装盒的最小含量和最大内容尺寸的计算。然而，像<a href="http://www.w3.org/TR/CSS21/visudet.html#propdef-width" target="_blank" rel="external"><code>width</code></a>和<a href="http://www.w3.org/TR/CSS21/visudet.html#propdef-height" target="_blank" rel="external"><code>height</code></a>属性，<code>flex</code>的普通写法可以应用于<code>table</code>，如下所示：伸缩项目的最终尺寸是通过执行布局来计算的，就好像计算<code>table</code>包装盒边缘之间的距离。<code>table</code>盒子的内容边缘是<code>table</code>盒子的<code>padding + border</code>区域，并且<code>table</code>盒子是伸缩项目。</p>
<h3 id="4-1_绝对定位的Flex儿子">4.1 绝对定位的<code>Flex</code>儿子</h3><p>一个伸缩容器的绝对定位的子元素不参与到<code>flex</code>布局中。然而，它会参与到<a href="http://www.w3.org/TR/css-flexbox-1/#algo-flex-order" target="_blank" rel="external">重新排序</a>中（详细见：<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-order" target="_blank" rel="external">order</a>），会对他们的绘制顺序有一个影响。</p>
<p>一个伸缩容器的绝对定位的子元素的<a href="http://www.w3.org/TR/CSS21/visudet.html#abs-non-replaced-width" target="_blank" rel="external">静态位置</a>被确定为使得子元素就好像是 伸缩容器的唯一伸缩项目那样去定位，这会假设子元素和伸缩容器的使用尺寸(used size)为固定大小的盒子。</p>
<p>换句话说，一个伸缩容器的绝对定位的子元素的<a href="http://www.w3.org/TR/CSS21/visudet.html#abs-non-replaced-width" target="_blank" rel="external">静态位置</a>被确定为：当将子元素的<a href="http://www.w3.org/TR/css-flexbox-1/#static-position-rectangle" target="_blank" rel="external">静态位置矩形</a>设置到伸缩容器的内容盒子后，然后再将绝对定位的儿子在这个矩形中通过在伸缩容器上设置的<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-justify-content" target="_blank" rel="external"><code>justify-content</code></a>值和设置在伸缩项目上的<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-align-self" target="_blank" rel="external">align-self</a>值来进行对齐。</p>
<blockquote>
<p><strong>静态位置矩形：</strong><br>静态位置矩形是<a href="http://www.w3.org/TR/css3-align/#alignment-container" target="_blank" rel="external">对齐容器</a>用于决定绝对定位元素的静态位置偏移。在<code>block</code>布局中它对应了<a href="http://www.w3.org/TR/CSS21/visudet.html#abs-non-replaced-width" target="_blank" rel="external"> CSS2.1§10.3.7</a>中描述的<code>假想盒子</code>的位置。</p>
</blockquote>
<h3 id="4-2_伸缩容器的外边距和内边距">4.2 伸缩容器的外边距和内边距</h3><p>毗邻的伸缩项目的<code>margin</code>是不会折叠的。自动外边距则在相应的维度吸收额外的空间，并且可以用于对齐和相邻伸缩项目之间的距离。<a href="http://www.w3.org/TR/css-flexbox-1/#auto-margins" target="_blank" rel="external">可以看<code>auto</code>外边距的对齐</a>。</p>
<p>在伸缩项目上设置的百分比的外边距和内边距总是相对于它们自身的尺寸来解析，而不像<code>blocks</code>，它们并不总是相对于他们的包含块的行内尺寸来解析。</p>
<h3 id="4-3_伸缩项目的Z轴顺序">4.3 伸缩项目的Z轴顺序</h3><p>伸缩项目的绘制和行内块是相同的，只是<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-order" target="_blank" rel="external"><code>order</code></a>会修改文档的顺序，从而代替原始文档的顺序，并且<a href="http://www.w3.org/TR/css3-positioning/#z-index" target="_blank" rel="external">z-index</a>设置了除<code>auto</code>值之外的其他值是会创建一个层叠上下文，即使<code>position</code>被设置为<code>static</code>。</p>
<h3 id="4-4_被折叠的项目（Collapsed_Items）">4.4 被折叠的项目（Collapsed Items）</h3><p>当在一个伸缩容器上指定了<code>visibility:collapse</code>，此时伸缩项目成为了一个被折叠的项目，产生了一种类似于在<code>table-row</code>和<code>table-column</code>元素上设置<code>visibility:collapse</code>的效果：被折叠的伸缩项目完全从渲染中移除，但是它留下了一个<code>支柱</code>，以此保持伸缩线侧轴尺寸的稳定。因此，如果一个伸缩容器只有一个伸缩行（flex line），动态折叠和未折叠的项目会保证对伸缩容器的侧轴没有影响，并且不会造成页面布局的其余部分<code>摆动</code>。伸缩行换行会在折叠后重新做，然而，一个有着多行的伸缩容器的侧轴尺寸可能改变，也可能不改变。</p>
<p>尽管被折叠的项目不会重新渲染，但是它们出现在格式化结构中。所以，它不像<code>display: none</code>项目，影响是依赖的盒子出现在格式化结构中，并且仍然作用在折叠的元素上。</p>
<p><strong>实例：</strong></p>
<p>在下面的例子中，一个侧栏被设置以适应其内容的尺寸。<a href="http://www.w3.org/TR/CSS21/visufx.html#propdef-visibility" target="_blank" rel="external"><code>visibility: collapse</code></a>被用于动态对隐藏导航栏部分，且不影响他们的宽度，即使最宽的部分是一个折叠部分。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line">  <span class="at_rule">@<span class="keyword">media</span> (min-width: <span class="number">60em</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/* two column layout only when enough room (relative to default text size) */</span></span><br><span class="line">    <span class="tag">header</span> + <span class="tag">div</span> <span class="rules">&#123; <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>; &#125;</span></span><br><span class="line">    <span class="id">#main</span> <span class="rules">&#123;</span><br><span class="line">      <span class="rule"><span class="attribute">flex</span>:<span class="value"> <span class="number">1</span></span></span>;         <span class="comment">/* Main takes up all remaining space */</span></span><br><span class="line">      <span class="rule"><span class="attribute">order</span>:<span class="value"> <span class="number">1</span></span></span>;        <span class="comment">/* Place it after (to the right of) the navigation */</span></span><br><span class="line">      <span class="rule"><span class="attribute">min-width</span>:<span class="value"> <span class="number">12em</span></span></span>; <span class="comment">/* Optimize main content area sizing */</span></span><br><span class="line">    &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* menu items use flex layout so that visibility:collapse will work */</span></span><br><span class="line">  <span class="tag">nav</span> &gt; <span class="tag">ul</span> &gt; <span class="tag">li</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">flex-flow</span>:<span class="value"> column</span></span>;</span><br><span class="line">  &#125;</span></span><br><span class="line">  <span class="comment">/* dynamically collapse submenus when not targetted */</span></span><br><span class="line">  <span class="tag">nav</span> &gt; <span class="tag">ul</span> &gt; <span class="rule"><span class="attribute">li</span>:<span class="value"><span class="function">not</span>(:target):<span class="function">not</span>(:hover) &gt; ul &#123;</span><br><span class="line">    visibility: collapse</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line">…</span><br><span class="line"><span class="tag">&lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">article</span> <span class="attribute">id</span>=<span class="value">"main"</span>&gt;</span></span><br><span class="line">    Interesting Stuff to Read</span><br><span class="line">  <span class="tag">&lt;/<span class="title">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">nav</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">li</span> <span class="attribute">id</span>=<span class="value">"nav-about"</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#nav-about"</span>&gt;</span>About<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">        …</span><br><span class="line">      <span class="tag">&lt;<span class="title">li</span> <span class="attribute">id</span>=<span class="value">"nav-projects"</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#nav-projects"</span>&gt;</span>Projects<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"…"</span>&gt;</span>Art<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"…"</span>&gt;</span>Architecture<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"…"</span>&gt;</span>Music<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">li</span> <span class="attribute">id</span>=<span class="value">"nav-interact"</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#nav-interact"</span>&gt;</span>Interact<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">        …</span><br><span class="line">    <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>为了计算<code>支柱</code>的尺寸，<code>flex</code>布局首先以所有项目未折叠来处理，然后重新运行使所有的折叠项目用<code>支柱</code>来替换，且维持该项目原始行的原始侧轴。可以看<a href="http://www.w3.org/TR/css-flexbox-1/#layout-algorithm" target="_blank" rel="external">Flex布局算法</a>与<code>visibility: collapse</code>的相互作用。</p>
<blockquote>
<p>在任何伸缩项目上使用<code>visibility: collapse</code>会导致<code>flex</code>布局算法会重复中途部分，并且运行最昂贵的步骤。所以建议作者继续使用<code>display: none</code>，如果不需要动态的折叠或不折叠项目时，因为它对于布局引擎更加高效。</p>
</blockquote>
<h3 id="4-5_伸缩项目隐含的最小尺寸">4.5 伸缩项目隐含的最小尺寸</h3><p>为了给伸缩项目提供更合理的默认最小尺寸，规范中引入了一个新的值<code>auto</code>作为<a href="http://www.w3.org/TR/CSS21/visudet.html#propdef-min-width" target="_blank" rel="external"><code>min-width</code></a>和<a href="http://www.w3.org/TR/CSS21/visudet.html#propdef-min-height" target="_blank" rel="external"><code>min-height</code></a>属性的初始值（在<a href="http://www.w3.org/TR/css-flexbox-1/#biblio-css21" target="_blank" rel="external">CSS2.1</a>中定义）。</p>
<ul>
<li>名称：<code>min-width</code>，<code>min-height</code></li>
<li>取值：<code>auto</code></li>
<li>新的计算值：指定的百分比或绝对长度或关键字</li>
<li>新的初始值：<code>auto</code></li>
</ul>
<p><strong>auto</strong><br>在<a href="http://www.w3.org/TR/css-flexbox-1/#main-axis" target="_blank" rel="external">主轴</a>上，在一个<code>overflow</code>为<code>visible</code>的伸缩项目上，当在伸缩项目当主轴上指定了最小尺寸属性，下面的表格给出了最小尺寸：</p>
<h2 id="5_排序和方向（Ordering_and_Orientation）">5 排序和方向（Ordering and Orientation）</h2><p>一个伸缩容器的内容可以布置在任何方向或者任何排序。这使得作者很容易达到的效果，而在之前这些需要复杂或者易碎的方法才能达到，例如使用<a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-float" target="_blank" rel="external"><code>float</code></a>和<a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-clear" target="_blank" rel="external"><code>clear</code></a>属性的<code>hacks</code>。这些功能是通过<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex-direction" target="_blank" rel="external"><code>flex-direction</code></a>、<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex-wrap" target="_blank" rel="external"><code>flex-wrap</code></a>和<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-order" target="_blank" rel="external"><code>order</code></a>属性来暴露。</p>
<blockquote>
<p><code>flex</code>布局的重排序功能只会影响视觉到渲染。</p>
</blockquote>
<p>作者不可以使用<code>order</code>或<code>flex-flow</code>和<code>flex-direction</code>的<code>*-reverse</code>值来替代正确源排序，因为这会破坏文档的可访问性。</p>
<h3 id="5-1_伸缩流方向：flex-direction属性">5.1 伸缩流方向：<code>flex-direction</code>属性</h3><ul>
<li>名称：<code>flex-direction</code></li>
<li>取值：<code>row | row-reverse | column | column-reverse</code></li>
<li>初始值：<code>row</code></li>
<li>应用于：伸缩容器</li>
<li>媒体：视觉</li>
<li>计算值：指定的值</li>
</ul>
<p><code>flex-direction</code>属性指定了伸缩项目如何在伸缩容器中放置，是通过设置伸缩容器的主轴的方向。这决定了伸缩项目在布局中的方向。</p>
<p>属性值的意义：</p>
<ul>
<li>row：伸缩容器的主轴和当前的<a href="http://www.w3.org/TR/css-writing-modes-3/#writing-mode0" target="_blank" rel="external">书写模式</a>的<a href="http://www.w3.org/TR/css-writing-modes-3/#inline-axis-" target="_blank" rel="external">行内轴</a>方向是一致的。<a href="http://www.w3.org/TR/css-flexbox-1/#main-start" target="_blank" rel="external"><code>main-start</code></a>和<a href="http://www.w3.org/TR/css-flexbox-1/#main-end" target="_blank" rel="external"><code>main-end</code></a>的方向等价于<a href="http://www.w3.org/TR/css-writing-modes-3/#inline-start" target="_blank" rel="external"><code>inline-start</code></a>和<a href="http://www.w3.org/TR/css-writing-modes-3/#inline-end" target="_blank" rel="external"><code>inline-end</code></a>的方向，各自的在当前书写模式</li>
<li>row-reverse：和<code>row</code>比较相同，只是<a href="http://www.w3.org/TR/css-flexbox-1/#main-start" target="_blank" rel="external"><code>main-start</code></a>和<a href="http://www.w3.org/TR/css-flexbox-1/#main-end" target="_blank" rel="external"><code>main-end</code></a>它们的方向交换了</li>
<li>column：伸缩容器的主轴和当前的<a href="http://www.w3.org/TR/css-writing-modes-3/#writing-mode0" target="_blank" rel="external">书写模式</a>的<a href="http://www.w3.org/TR/css-writing-modes-3/#block-axis-" target="_blank" rel="external">块轴</a>方向是一致的。<a href="http://www.w3.org/TR/css-flexbox-1/#main-start" target="_blank" rel="external"><code>main-start</code></a>和<a href="http://www.w3.org/TR/css-flexbox-1/#main-end" target="_blank" rel="external"><code>main-end</code></a>的方向等价于<a href="http://www.w3.org/TR/css-writing-modes-3/#block-start" target="_blank" rel="external"><code>block-start</code></a>和<a href="http://www.w3.org/TR/css-writing-modes-3/#block-end" target="_blank" rel="external"><code>black-end</code></a>的方向，各自的在当前书写模式</li>
<li>column-reverse：和<code>column</code>比较相同，只是<a href="http://www.w3.org/TR/css-flexbox-1/#main-start" target="_blank" rel="external"><code>main-start</code></a>和<a href="http://www.w3.org/TR/css-flexbox-1/#main-end" target="_blank" rel="external"><code>main-end</code></a>它们的方向交换了</li>
</ul>
<blockquote>
<p><code>reverse</code>的取值不是反转了盒子的排序：就像<a href="http://www.w3.org/TR/css-writing-modes-3/#writing-mode0" target="_blank" rel="external">书写模式</a>和<a href="http://www.w3.org/TR/css-writing-modes-3/#propdef-direction" target="_blank" rel="external">direction</a>，它只是改变了流的方向。</p>
</blockquote>
<h3 id="5-2_伸缩行换行：flex-wrap属性">5.2 伸缩行换行：<code>flex-wrap</code>属性</h3><ul>
<li>名称：<code>flex-wrap</code></li>
<li>取值：<code>nowrap | wrap | wrap-reverse</code></li>
<li>初始值：<code>nowrap</code></li>
<li>应用于：伸缩容器</li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值</li>
</ul>
<p><code>flex-wrap</code>属性控制了伸缩容器是否在<a href="http://www.w3.org/TR/css-flexbox-1/#single-line" target="_blank" rel="external">单行</a>显示还是在<a href="http://www.w3.org/TR/css-flexbox-1/#multi-line" target="_blank" rel="external">多行</a>显示，并且侧轴的方向，决定了新的行层叠的方向。</p>
<p>属性值的意义：</p>
<ul>
<li>nowrap：伸缩容器在单行显示。<a href="http://www.w3.org/TR/css-flexbox-1/#cross-start" target="_blank" rel="external"><code>cross-start</code></a>的方向等价于当前<a href="http://www.w3.org/TR/css-writing-modes-3/#writing-mode0" target="_blank" rel="external">书写模式</a>中<a href="http://www.w3.org/TR/css-writing-modes-3/#inline-start" target="_blank" rel="external"><code>inline-start</code></a>或<a href="http://www.w3.org/TR/css-writing-modes-3/#block-start" target="_blank" rel="external"><code>block-start</code></a>中一个的方向。无论哪个是<a href="http://www.w3.org/TR/css-flexbox-1/#cross-start" target="_blank" rel="external"><code>cross-start</code></a>，<a href="http://www.w3.org/TR/css-flexbox-1/#cross-end" target="_blank" rel="external"><code>cross-end</code></a>是和<a href="http://www.w3.org/TR/css-flexbox-1/#cross-start" target="_blank" rel="external"><code>cross-start</code></a>的方向正好相反</li>
<li>wrap：伸缩容器在多行显示。<a href="http://www.w3.org/TR/css-flexbox-1/#cross-start" target="_blank" rel="external"><code>cross-start</code></a>的方向等价于当前<a href="http://www.w3.org/TR/css-writing-modes-3/#writing-mode0" target="_blank" rel="external">书写模式</a>中<a href="http://www.w3.org/TR/css-writing-modes-3/#inline-start" target="_blank" rel="external"><code>inline-start</code></a>或<a href="http://www.w3.org/TR/css-writing-modes-3/#block-start" target="_blank" rel="external"><code>block-start</code></a>中一个的方向。无论哪个是<a href="http://www.w3.org/TR/css-flexbox-1/#cross-start" target="_blank" rel="external"><code>cross-start</code></a>，<a href="http://www.w3.org/TR/css-flexbox-1/#cross-end" target="_blank" rel="external"><code>cross-end</code></a>是和<a href="http://www.w3.org/TR/css-flexbox-1/#cross-start" target="_blank" rel="external"><code>cross-start</code></a>的方向正好相反</li>
<li>wrap-reverse：和<code>wrap</code>相同，只是<code>cross-start</code>和<code>cross-end</code>交换了</li>
</ul>
<h3 id="5-3_伸缩方向和换行：flex-flow属性">5.3 伸缩方向和换行：<code>flex-flow</code>属性</h3><ul>
<li>名称：<code>flex-flow</code></li>
<li>取值：<code>&lt;flex-direction&gt; || &lt;flex-wrap&gt;</code></li>
<li>初始值：取决于<code>flex-direction</code>和<code>flex-wrap</code>的初始值</li>
<li>应用于：伸缩容器</li>
<li>继承：取决于<code>flex-direction</code>和<code>flex-wrap</code>的初始值</li>
<li>媒体：视觉</li>
<li>计算值：取决于<code>flex-direction</code>和<code>flex-wrap</code>的初始值</li>
</ul>
<p><code>flex-flow</code>属性是<code>flex-direction</code>和<code>flex-wrap</code>的简写。它一起定义了伸缩容器的主轴和侧轴。</p>
<p><strong>实例：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">div</span> <span class="rules">&#123; <span class="rule"><span class="attribute">flex-flow</span>:<span class="value"> row</span></span>; &#125;</span></span><br><span class="line"><span class="comment">/* Initial value. Main-axis is</span><br><span class="line">   inline, no wrap. */</span></span><br></pre></td></tr></table></figure>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/flex-flow1.svg" alt="enter image description here"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">div</span> <span class="rules">&#123; <span class="rule"><span class="attribute">flex-flow</span>:<span class="value"> column wrap</span></span>; &#125;</span></span><br><span class="line"><span class="comment">/* Main-axis is block-direction (top to bottom)</span><br><span class="line">   and lines wrap in the inline direction (rightwards). */</span></span><br></pre></td></tr></table></figure>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/flex-flow2.svg" alt="enter image description here"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">div</span> <span class="rules">&#123; <span class="rule"><span class="attribute">flex-flow</span>:<span class="value"> row-reverse wrap-reverse</span></span>; &#125;</span></span><br><span class="line"><span class="comment">/* Main-axis is the opposite of inline direction</span><br><span class="line">   (right to left). New lines wrap upwards. */</span></span><br></pre></td></tr></table></figure>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/flex-flow3.svg" alt="enter image description here"></p>
<h3 id="5-4_显示顺序：order属性">5.4 显示顺序：<code>order</code>属性</h3><p>伸缩项目在默认情况下是按着它们源文档中出现的顺序来布局的。<code>order</code>属性可以被用于改变这些顺序。</p>
<ul>
<li>名称：<code>order</code></li>
<li>取值：<a href="http://www.w3.org/TR/css-syntax-3/#typedef-integer" target="_blank" rel="external"><code>&lt;integer&gt;</code></a></li>
<li>初始值：0</li>
<li>应用于：伸缩项目和伸缩容器的绝对定位儿子</li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值</li>
<li>是否可以动画：是</li>
</ul>
<p><code>order</code>属性控制在伸缩容器内子元素在伸缩容器中的顺序，通过将它们分配到有序组。它只接受单一的<a href="http://www.w3.org/TR/css-syntax-3/#typedef-integer" target="_blank" rel="external"><code>&lt;integer&gt;</code></a>作为属性值，并且指定的就是伸缩项目属于的有序组。</p>
<p>一个伸缩容器把它的内容布局在<code>被修改的文档顺序</code>，从最小数字的有序组开始，并以此类推。当项目具有相同的值时，它们就按照他们在源文档中的顺序来布局。这个会影响<a href="http://www.w3.org/TR/CSS2/zindex.html" target="_blank" rel="external">绘制顺序</a>，就好像伸缩项目在源文档中被重排序。</p>
<p>实例：</p>
<p>下图显示了一个简单的标签式界面，标签中的活动窗格永远是第一个：</p>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/flex-order-example.png" alt="enter image description here"></p>
<p>这可以通过以下<code>CSS</code>代码来实现：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.tabs</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.tabs</span> &gt; * <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">min-width</span>:<span class="value"> min-content</span></span>;</span><br><span class="line">  <span class="comment">/* Prevent tabs from getting too small for their content. */</span></span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.tabs</span> &gt; <span class="class">.current</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">order</span>:<span class="value"> -<span class="number">1</span></span></span>; <span class="comment">/* Lower than the default of 0 */</span></span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="5-4-1_重排序和可访问性">5.4.1 重排序和可访问性</h4><p><code>order</code>属性不会影响非视觉媒体的排序。同样的，<code>order</code>不影响连续导航模式的默认遍历顺序。作者只能在视觉媒体中使用<code>order</code>属性。</p>
<p><strong>实例：</strong></p>
<p>许多网页在标记上具有类似的形状，在顶部的头部，在底部的页脚，然后一个内容区域和一个或在中间的两个附加列。一般情况下，内容最好首先出现在页面的源代码中，在其他列之前。然而，这是非常常见的设计，例如简单的将附加列放在左边而内容区域放在右边，这是难以实现的。这在许多方面已经得到解决，这经常被命名为“圣杯布局”，它有两个附加列。例如，利用网页代码和以下草图实现所需的布局：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">header</span>&gt;</span>...<span class="tag">&lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">'main'</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">article</span>&gt;</span>...<span class="tag">&lt;/<span class="title">article</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">nav</span>&gt;</span>...<span class="tag">&lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">aside</span>&gt;</span>...<span class="tag">&lt;/<span class="title">aside</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">footer</span>&gt;</span>...<span class="tag">&lt;/<span class="title">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/flex-order-page.svg" alt="enter image description here"></p>
<p>这种布局可以轻松的通过<code>Flex</code>布局来实现：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#main</span> <span class="rules">&#123; <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>; &#125;</span></span><br><span class="line"><span class="id">#main</span> &gt; <span class="tag">article</span> <span class="rules">&#123; <span class="rule"><span class="attribute">order</span>:<span class="value"> <span class="number">2</span></span></span>; <span class="rule"><span class="attribute">min-width</span>:<span class="value"> <span class="number">12em</span></span></span>; <span class="rule"><span class="attribute">flex</span>:<span class="value"><span class="number">1</span></span></span>; &#125;</span></span><br><span class="line"><span class="id">#main</span> &gt; <span class="tag">nav</span>     <span class="rules">&#123; <span class="rule"><span class="attribute">order</span>:<span class="value"> <span class="number">1</span></span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200px</span></span></span>; &#125;</span></span><br><span class="line"><span class="id">#main</span> &gt; <span class="tag">aside</span>   <span class="rules">&#123; <span class="rule"><span class="attribute">order</span>:<span class="value"> <span class="number">3</span></span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200px</span></span></span>; &#125;</span></span><br></pre></td></tr></table></figure>
<p>作为一个额外的奖励，我们是所有的列默认情况下等高的，主内容则尽可能宽的填充屏幕。此外，这可以结合<code>media queries</code>来实现在窄屏幕下将所有的列垂直布局。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> all and (max-width: <span class="number">600px</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* Too narrow to support three columns */</span></span><br><span class="line">  <span class="id">#main</span> <span class="rules">&#123; <span class="rule"><span class="attribute">flex-flow</span>:<span class="value"> column</span></span>; &#125;</span></span><br><span class="line">  <span class="id">#main</span> &gt; <span class="tag">article</span>, <span class="id">#main</span> &gt; <span class="tag">nav</span>, <span class="id">#main</span> &gt; <span class="tag">aside</span> <span class="rules">&#123;</span><br><span class="line">    <span class="comment">/* Return them to document order */</span></span><br><span class="line">    <span class="rule"><span class="attribute">order</span>:<span class="value"> <span class="number">0</span></span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> auto</span></span>;</span><br><span class="line">  &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6_伸缩行（Flex_Lines）">6 伸缩行（Flex Lines）</h2><p>伸缩项目在伸缩容器内被布局，并通过伸缩行来对齐。假设容器（hypothetical containers）则被布局算法用于分组和对齐。一个伸缩容器可以是<a href="http://www.w3.org/TR/css-flexbox-1/#single-line" target="_blank" rel="external">单行</a>，也可以是<a href="http://www.w3.org/TR/css-flexbox-1/#multi-line" target="_blank" rel="external">多行</a>的，这取决于<code>flex-wrap</code>属性：</p>
<ul>
<li>一个<code>单行</code>的伸缩容器将它的所有儿子布局在单行，即使这会导致它的内容溢出。</li>
<li>一个<code>多行</code>的伸缩容器将伸缩项目跨越多行，这类似于当文本太宽时折行出新行以适应现有行。当附加的行被创建时，它们通过<code>flex-wrap</code>属性并沿着侧轴堆栈在伸缩容器内。每一行至少包含一个<code>伸缩项目</code>，除非伸缩容器本身是空的。</li>
</ul>
<p><strong>实例：</strong></p>
<p>这个例子显示了四个按钮，并且在水平方向不能完全适应（容不下四个）：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="id">#flex</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">flex-flow</span>:<span class="value"> row wrap</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">300px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.item</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">80px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"flex"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'item'</span>&gt;</span>1<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'item'</span>&gt;</span>2<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'item'</span>&gt;</span>3<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'item'</span>&gt;</span>4<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>因为容器只有<code>300px</code>，只有三个的项目适应到单行。它们占了<code>240px</code>，并且剩下了<code>60px</code>的剩余空间。因为伸缩容器的<code>flex-flow</code>属性指定了这是一个多行的，所以伸缩容器会创建一个附加的行来包含最后一个项目。</p>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/multiline-no-flex.svg" alt="enter image description here"></p>
<p>一旦内容被分成多行，每行都是独立布局的；伸缩尺寸和<code>justify-content</code>和<code>align-self</code>属性仅仅将项目认为是单行的。</p>
<p>当一个伸缩容器有多行时，<a href="http://www.w3.org/TR/css-flexbox-1/#cross-size" target="_blank" rel="external">侧轴尺寸</a>的每一行是该行包含的伸缩项目的最小必须尺寸，并且所有的行在伸缩容器内的对齐是通过<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-align-content" target="_blank" rel="external">align-content</a>属性来对齐的。当一个伸缩容器（即使是一个多行的伸缩容器，flex-wrap: wrap）只有一行时，该行 的侧轴尺寸是伸缩容器侧轴的尺寸，此时应用<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-align-content" target="_blank" rel="external">align-content</a>没有效果。一行的<a href="http://www.w3.org/TR/css-flexbox-1/#main-size" target="_blank" rel="external">主轴尺寸</a>总是和伸缩容器的内容盒子的主轴尺寸的大小一样。</p>
<p><strong>实例：</strong></p>
<p>这里是一个和前面相同的例子，只是我们在伸缩项目上设置了<code>flex: auto</code>。第一行有剩余的<code>60px</code>，所有的项目具有相同的伸缩性，所以三个项目中的每一个都会得到额外的<code>20px</code>。最后一个项目则会伸缩到整行。</p>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/multiline-flex.svg" alt="enter image description here"></p>
<h2 id="7_伸缩性">7 伸缩性</h2><p><code>flex</code>布局的定义方面是使伸缩项目可伸缩的能力，改变它们的宽度/高度，以填补在<a href="http://www.w3.org/TR/css-flexbox-1/#main-dimension" target="_blank" rel="external">主轴维度</a>中的可用空间。这是通过<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex" target="_blank" rel="external">flex</a>属性来完成的。伸缩容器将它的可用空间成比例的分配到它的伸缩项目中，这个比例通过伸缩项目的<a href="http://www.w3.org/TR/css-flexbox-1/#flex-grow-factor" target="_blank" rel="external">伸缩增长因素</a>决定，或者成比例缩小它们以防止溢出，这个比例是通过伸缩项目的<a href="http://www.w3.org/TR/css-flexbox-1/#flex-shrink-factor" target="_blank" rel="external">伸缩缩小因素</a>决定。</p>
<h3 id="7-1_flex简写">7.1 <code>flex</code>简写</h3><ul>
<li>名称：<code>flex</code></li>
<li>取值：<code>none | auto | [ &lt;‘flex-grow’&gt; &lt;‘flex-shrink’&gt;? || &lt;‘flex-basis’&gt; ]</code></li>
<li>应用于：伸缩项目</li>
<li>初始值：单个属性决定</li>
<li>媒体：视觉</li>
<li>计算值：单个属性决定</li>
</ul>
<p><code>flex</code>属性指定了组件的伸缩长度：<a href="http://www.w3.org/TR/css-flexbox-1/#flex-grow-factor" target="_blank" rel="external">伸缩增长因素</a>、<a href="http://www.w3.org/TR/css-flexbox-1/#flex-shrink-factor" target="_blank" rel="external">伸缩缩小因素</a>和<a href="http://www.w3.org/TR/css-flexbox-1/#flex-basis" target="_blank" rel="external">伸缩基础</a>。当一个盒子是伸缩项目时，<code>flex</code>属性被咨询并代替<a href="http://www.w3.org/TR/css-flexbox-1/#main-size-property" target="_blank" rel="external">主轴尺寸属性</a>去决定盒子的<a href="http://www.w3.org/TR/css-flexbox-1/#main-size" target="_blank" rel="external">主轴尺寸</a>。如果一个盒子不是伸缩项目，<code>flex</code>属性对其没有效果。</p>
<p>下面是各取值组件的意义：</p>
<ul>
<li><a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex-grow" target="_blank" rel="external">flex-grow</a>：这个<code>&lt;number&gt;</code>组件是<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex-grow" target="_blank" rel="external">flex-grow</a>的普通写法，它指定了<code>伸缩增长因素</code>，它决定了该伸缩项目相对于有正的可用空间的伸缩容器中其他伸缩项目的增长比例。当省略时，它被设置为<code>1</code>。</li>
<li><a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex-shrink" target="_blank" rel="external">flex-shrink</a>：这个<code>&lt;number&gt;</code>组件是<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex-shrink" target="_blank" rel="external">flex-shrink</a>的普通写法，它指定了<code>伸缩缩小因素</code>，它决定了该伸缩项目相对于有负的可用空间的伸缩容器中其他伸缩项目的缩小比例。当省略时，它被设置为<code>1</code>。当分发负的空间时，<a href="http://www.w3.org/TR/css-flexbox-1/#flex-shrink-factor" target="_blank" rel="external">伸缩缩小因素</a>是乘以<a href="http://www.w3.org/TR/css-flexbox-1/#flex-basis" target="_blank" rel="external">伸缩基础</a>的。</li>
<li><a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex-basis" target="_blank" rel="external">flex-basis</a>：该组件，具有和<code>width</code>属性相同的属性值，是设置<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-flex-basis" target="_blank" rel="external">flex-basis</a>的普通写法，指定了<code>伸缩基础</code>：是伸缩项目的初始<a href="http://www.w3.org/TR/css-flexbox-1/#main-size" target="_blank" rel="external">主轴尺寸</a>，它是在根据伸缩因素分发可用空间之前设置的。当在<code>flex</code>简写中省略了它，它的指定值为<code>0%</code>。</li>
</ul>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/rel-vs-abs-flex.svg" alt="enter image description here"></p>
<p>上面这个图片展示了绝对和相对的<code>flex</code>。</p>
<ul>
<li>auto：关键字<code>auto</code>相当于<code>1 1 main-size</code></li>
<li>none：关键字<code>none</code>相当于<code>0 0 main-size</code></li>
</ul>
<p><code>flex</code>属性的组件的初始值是等价于<code>0 1 main-size</code>的。</p>
<h3 id="7-2_flex的常用值">7.2 <code>flex</code>的常用值</h3><p>下面的列表总结了最常见的<code>flex</code>值的效果：</p>
<p><strong>flex: 0 main-size</strong><br><strong>flex: initial</strong><br>等价于<code>flex: 0 1 main-size</code>（这个是初始值）。当有正当可用空间时，这会使得当伸缩项目是不可伸缩的，但是当空间不足时允许伸缩项目收缩到它的最小尺寸。</p>
<p><strong>flex: auto</strong><br>等价于<code>flex: 1 1 main-size</code>。</p>
<p><strong>flex: none</strong><br>等价于<code>flex: 0 0 main-size</code></p>
<p><strong>flex: <code>&lt;position-number&gt;</code></strong><br>等价于<code>flex: &lt;position-number&gt; 1 0％</code></p>
<h3 id="7-3_伸缩性的组件">7.3 伸缩性的组件</h3><p>伸缩性的各个组件可以通过独立的普通写法属性来控制。</p>
<blockquote>
<p>作者被建议使用<code>flex</code>简写法来设置，而不是通过各个组件来设置，因为简写法可以正确的重置任何未指定的组件以适应常见的用途。</p>
</blockquote>
<h4 id="7-3-1_flex-grow属性">7.3.1 <code>flex-grow</code>属性</h4><ul>
<li>名称：<code>flex-grow</code></li>
<li>取值：<code>&lt;number&gt;</code></li>
<li>应用于：伸缩项目</li>
<li>初始值：0</li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值</li>
<li>是否能动画：是</li>
</ul>
<p><code>flex-grow</code>属性用<code>&lt;number&gt;</code>来设置<a href="http://www.w3.org/TR/css-flexbox-1/#flex-grow-factor" target="_blank" rel="external">伸缩增长因素</a>，负值是不允许的。</p>
<h4 id="7-3-2_flex-shrink属性">7.3.2 <code>flex-shrink</code>属性</h4><ul>
<li>名称：<code>flex-shrink</code></li>
<li>取值：<code>&lt;number&gt;</code></li>
<li>应用于：伸缩项目</li>
<li>初始值：1</li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值</li>
<li>是否能动画：是</li>
</ul>
<p><code>flex-shrink</code>属性用<code>&lt;number&gt;</code>来设置<a href="http://www.w3.org/TR/css-flexbox-1/#flex-shrink-factor" target="_blank" rel="external">伸缩缩小因素</a>，负值是不允许的。</p>
<h4 id="7-3-2_flex-basis属性">7.3.2 <code>flex-basis</code>属性</h4><ul>
<li>名称：<code>flex-basis</code></li>
<li>取值：<code>main-size | &lt;‘width’&gt;</code></li>
<li>应用于：伸缩项目</li>
<li>初始值：<code>main-size</code></li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值，长度将被转换为绝对值</li>
<li>百分比：相对于伸缩容器的内部<a href="http://www.w3.org/TR/css-flexbox-1/#main-size" target="_blank" rel="external">主尺寸</a>（inner main size）</li>
<li>是否能动画：是</li>
</ul>
<p><code>flex-basis</code>属性设置<a href="http://www.w3.org/TR/css-flexbox-1/#flex-basis" target="_blank" rel="external">伸缩基础</a>，它接受和<code>width</code>和<code>height</code>属性相同的属性值。</p>
<p>当在伸缩项目上设置了<code>main-size</code>关键字，会去检索<a href="http://www.w3.org/TR/css-flexbox-1/#main-size-property" target="_blank" rel="external">主轴尺寸属性</a>的值。</p>
<p><code>flex-basis</code>是和<code>width</code>在水平书写模式解析一样：百分比的值是相对于伸缩项目的包含块，例如，它的伸缩容器，如果包含块的尺寸是<a href="http://www.w3.org/TR/css-flexbox-1/#indefinite" target="_blank" rel="external">不确定的</a>，其结果和<code>auto</code>的主尺寸一样。类似的，<code>flex-basis</code>决定了内容盒子的尺寸，除非指定了<code>box-sizing</code>等。</p>
<h2 id="8_对齐（Alignment）">8 对齐（Alignment）</h2><p>当一个伸缩容器的内容完成了伸缩后，并且所有的伸缩项目的尺寸都最后确定了，它们可以在伸缩容器中对齐。</p>
<p><a href="http://www.w3.org/TR/CSS21/box.html#propdef-margin" target="_blank" rel="external">margin</a>属性可以以一种类似的方式来对齐项目，但是更强大。</p>
<h3 id="8-1_用auto的margin来对齐">8.1 用<code>auto</code>的margin来对齐</h3><p>在伸缩项目上的<code>auto margins</code>和块级流中的<code>auto margins</code>在效果上是非常类似的：</p>
<ul>
<li>在计算伸缩基础和伸缩的长度期间，<code>auto margins</code>被当作为<code>0</code></li>
<li>优先于通过<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-justify-content" target="_blank" rel="external">justify-content</a>和<a href="http://www.w3.org/TR/css-flexbox-1/#propdef-align-self" target="_blank" rel="external">align-self</a>的对齐，在相应维度中任何正的可用空间被分配到<code>auto margins</code></li>
<li>溢出的盒子会忽略它们的<code>auto margins</code>，且溢出会在<a href="http://www.w3.org/TR/css-writing-modes-3/#end" target="_blank" rel="external">end</a>方向</li>
</ul>
<blockquote>
<p>要注意：如果可用空间被分发到<code>auto margins</code>，则对齐属性在这个维度上没有效果，因为在伸缩后<code>margins</code>偷走了所有到可用空间。</p>
</blockquote>
<p><strong>实例：</strong></p>
<p>一种<code>auto</code>的<code>margins</code>是在主轴上将伸缩项目清晰的分成组。下面的例子展示了如何使用它去模仿一个通用的<code>UI</code>图案－一个有许多动作的单一栏有一些左对齐，另外的右对齐。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="tag">nav</span> &gt; <span class="tag">ul</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="tag">nav</span> &gt; <span class="tag">ul</span> &gt; <span class="tag">li</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">min-width</span>:<span class="value"> min-content</span></span>;</span><br><span class="line">  <span class="comment">/* Prevent items from getting too small for their content. */</span></span><br><span class="line">&#125;</span></span><br><span class="line"><span class="tag">nav</span> &gt; <span class="tag">ul</span> &gt; <span class="id">#login</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> auto</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=/<span class="attribute">about</span>&gt;</span>About<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=/<span class="attribute">projects</span>&gt;</span>Projects<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=/<span class="attribute">interact</span>&gt;</span>Interact<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span> <span class="attribute">id</span>=<span class="value">'login'</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=/<span class="attribute">login</span>&gt;</span>Login<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">nav</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="8-2_轴对齐：justify-content属性">8.2 轴对齐：<code>justify-content</code>属性</h3><ul>
<li>名称：<code>justify-content</code></li>
<li>取值：<code>flex-start | flex-end | center | space-between | space-around</code></li>
<li>初始值：<code>flex-start</code></li>
<li>应用于：伸缩容器</li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值</li>
</ul>
<p><code>justify-content</code>属性沿着伸缩容器当前行的<a href="http://www.w3.org/TR/css-flexbox-1/#main-axis" target="_blank" rel="external">主轴</a>来对齐项目。当任何伸缩长度和任何<a href="http://www.w3.org/TR/css-flexbox-1/#auto-margins" target="_blank" rel="external">auto margins</a>被解析后，会被执行。通常情况下，当在一行中的任何伸缩项目都是不可伸缩的或者是可伸缩但达到了它们的最大尺寸时，它会帮助分配剩余的额外空间。当项目溢出行时，它也施加了一些控制在项目对对齐上。</p>
<p>属性取值就不翻译了，看个图片就明白了：</p>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/flex-pack.svg" alt="enter image description here"></p>
<h3 id="8-3_侧轴对齐：align-items和align-self属性">8.3 侧轴对齐：<code>align-items</code>和<code>align-self</code>属性</h3><p><strong>align-items：</strong></p>
<ul>
<li>名称：<code>align-items</code></li>
<li>取值：<code>flex-start | flex-end | center | baseline | stretch</code></li>
<li>初始值：<code>stretch</code></li>
<li>应用于：伸缩容器</li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值</li>
</ul>
<p><strong>align-self：</strong></p>
<ul>
<li>名称：<code>align-self</code></li>
<li>取值：<code>auto | flex-start | flex-end | center | baseline | stretch</code></li>
<li>初始值：<code>auto</code></li>
<li>应用于：伸缩项目</li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：<code>auto</code>的计算值是父亲的<code>align-items</code>属性值，否则为指定的值</li>
</ul>
<p>伸缩项目可以在伸缩容器当前行的侧轴上对齐，类似于<code>justify-content</code>，只是在垂直方向上。<code>align-items</code>为伸缩容器的项目设置了默认的对齐方式，包括匿名的伸缩项目。在单独的伸缩项目上<code>align-self</code>则允许默认的对齐方式被覆盖。</p>
<p>如果任何伸缩项目的侧轴的<code>margins</code>为<code>auto</code>，则<code>align-self</code>的设置没有效果。</p>
<p>下面还是用一个图片来看看各属性值的意义：</p>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/flex-align.svg" alt="enter image description here"></p>
<h3 id="8-4_align-content属性">8.4 <code>align-content</code>属性</h3><ul>
<li>名称：<code>align-content</code></li>
<li>取值：<code>flex-start | flex-end | center | space-between | space-around | stretch</code></li>
<li>初始值：<code>stretch</code></li>
<li>应用于：多行的伸缩容器</li>
<li>继承：无</li>
<li>媒体：视觉</li>
<li>计算值：指定的值</li>
</ul>
<p>当在侧轴上有额外的空间时，<code>align-content</code>属性是对齐在伸缩容器中的伸缩行，类似于<code>justify-content</code>在主轴上对齐单个的伸缩项目。要注意的是，当<strong>伸缩容器只有一行时</strong>，该属性是没有效果的。</p>
<p>属性值的意义看下图啦：</p>
<p><img src="http://www.w3.org/TR/css-flexbox-1/images/align-content-example.svg" alt="enter image description here"></p>
<h3 id="8-5_Flex基线（Flex_Baselines）">8.5 <code>Flex</code>基线（Flex Baselines）</h3><p>伸缩容器的基线由以下来决定：</p>
<p><strong>主轴基线</strong></p>
<ol>
<li>如果伸缩项目中的任何一个伸缩项目的第一行参与到了<a href="http://www.w3.org/TR/css-flexbox-1/#baseline-participation" target="_blank" rel="external">基线对齐</a>，伸缩容器的主轴基线是这些项目的伸缩基线</li>
<li>否则，如果伸缩容器有至少一个伸缩项目，它的第一个伸缩项目有一个平行于伸缩容器主轴的基线，则伸缩容器的主轴基线就是那个基线</li>
<li>否则，伸缩容器的主轴基线由第一个项目的内容盒子来合成，或者如果那个失败了，则由伸缩容器的内容盒子来合成</li>
</ol>
<p><strong>侧轴基线</strong></p>
<ol>
<li>如果伸缩容器至少有一个伸缩项目，且它的第一个伸缩项目有一个平行于伸缩容器侧轴的基线，则伸缩容器的侧轴基线就是那个基线</li>
<li>否则，伸缩容器的侧轴基线由第一个项目的内容盒子来合成，或者如果那个失败了，则由伸缩容器的内容盒子来合成</li>
</ol>
<p>当根据上面的规则来计算基线时，如果盒子贡献了基线且它有一个<code>overflow</code>的值允许滚动时，这个盒子在决定基线时必须认为它在初始的滚动位置。</p>
<p>当决定一个<code>table cell</code>的基线时，一个伸缩容器提供了类似于行框（line box）或<code>table-row</code>所做的那样的基线。</p>
<h2 id="9_Flex布局算法">9 Flex布局算法</h2><h2 id="10_分割Flex布局">10 分割Flex布局</h2><p>// todo</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/CSS/">CSS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/CSS3/">CSS3</a><a href="/tags/Flexbox/">Flexbox</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/01/13/css-flexbox/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/01/13/css-flexbox/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/01/07/css3-media-query/" title="CSS3 Media Query" itemprop="url">CSS3 Media Query</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://cookfront.github.io/about" title="cookfront@gmail.com" target="_blank" itemprop="author">cookfront@gmail.com</a>
		
  <p class="article-time">
    <time datetime="2015-01-07T03:47:42.000Z" itemprop="datePublished"> 發表於 2015-01-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>2015年的第一篇文章，新的一年更加努力的学习前端，重新开始，之前翻译的文章以及自己写的和一些笔记都放在了这里<a href="https://github.com/cookfront/learn-note/tree/master/blog-backup/2014" target="_blank" rel="external">2014‘s Blog</a>。</p>
<p>下面就进入正题了，这篇文章主要是<a href="http://www.w3.org/TR/css3-mediaqueries/" target="_blank" rel="external">W3C官方 Media Query</a>的一个学习和翻译。主要还是为了以后脑子不好使，可以回过头来看看复习复习。</p>
<h2 id="摘要和背景">摘要和背景</h2><p>在<code>HTML4</code>和<code>CSS2</code>只支持对于不同的<a href="http://www.w3.org/TR/CSS2/media.html" target="_blank" rel="external">媒体类型</a>来设置样式，例如一个文档在屏幕（screen）上显示时使用<code>sans-serif</code>字体，而在打印（print）时使用<code>serif</code>字体，这里的<code>screen</code>和<code>print</code>是定义好的两种媒体类型。而<code>Media Query</code>扩充了<code>Media Type</code>的功能，并且使我们能够更精准的应用样式表。</p>
<p>例如，在<code>HTML4</code>中：</p>
<p><strong>实例一</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">type</span>=<span class="value">"text/css"</span> <span class="attribute">media</span>=<span class="value">"screen"</span> <span class="attribute">href</span>=<span class="value">"sans-serif.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">type</span>=<span class="value">"text/css"</span> <span class="attribute">media</span>=<span class="value">"print"</span> <span class="attribute">href</span>=<span class="value">"serif.css"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>或者：</p>
<p><strong>实例二</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> screen </span>&#123;</span><br><span class="line">  * <span class="rules">&#123; <span class="rule"><span class="attribute">font-family</span>:<span class="value"> sans-serif &#125;</span><br><span class="line">&#125;</span></span></span></span><br></pre></td></tr></table></figure>
<p>一个<code>Media Query</code>包含了一个<code>Media Type</code>以及0个或多个来检查特定的媒体特性条件的表达式。在这些媒体特性中能在<code>Media Query</code>中被使用的是<code>width</code>，<code>height</code>和<code>color</code>。通过使用<code>Media Query</code>，页面的呈现可以在特定的终端中显示，而不需要去改变内容。</p>
<h2 id="兼容性">兼容性</h2><p>在了解<code>Media Query</code>之前需要了解浏览器对它的支持情况，以便在项目中更好的使用。可以在这里看到<a href="http://caniuse.com/#search=media%20query" target="_blank" rel="external">Media Query</a>对于浏览器的一个支持情况。对于IE永远是坑爹的，它只有在<code>IE8+</code>才支持<code>Media Query</code>。</p>
<p>那么在不支持的情况下有什么办法呢，社区的大牛给我们提供了<a href="https://github.com/scottjehl/Respond" target="_blank" rel="external">Respond.js</a>，它可以支持<code>IE8</code>及以下的浏览器。</p>
<h2 id="Media_Queries">Media Queries</h2><p>就如上面摘要提到的，一个<code>Media Query</code>包含了一个<code>Media Type</code>以及0个或多个来检查特定的媒体特性条件的表达式。</p>
<p>在本节中有关媒体<code>Media Query</code>的声明我们假设遵循了下面的<a href="#%E8%AF%AD%E6%B3%95">语法</a>章节。没有遵循语法的<code>Media Query</code>将在<a href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">错误处理</a>章节讲到。</p>
<p><strong>实例三：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">media</span>=<span class="value">"screen and (color)"</span> <span class="attribute">href</span>=<span class="value">"example.css"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个实例表达了一个确定的样式表（example.css）应用于一个确定的媒体类型（screen）以及确定的特性（必须为彩色屏幕）</p>
<p><strong>实例四：</strong></p>
<p>对于上面的实例三，我们也可以用<code>@import</code>语句：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">import</span> <span class="function">url</span>(color.css) screen and (color)</span>;</span><br></pre></td></tr></table></figure>
<p>一个<code>media queries</code>是一个逻辑表达式，它可能为真也可能为假。<code>media queries</code>为真当媒体类型匹配当前正在运行的用户代理所在设备的媒体类型，且在<code>media queries</code>中所有表达式为真时，我们的<code>media queries</code>就为真。</p>
<p>对于媒体类型为<code>all</code>的<code>media queries</code>有一种简写法，也就是只有<code>@media and ()...</code>：</p>
<p><strong>实例五：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 以下两个样式表是等价的 */</span></span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> all and (min-width:<span class="number">500px</span>) </span>&#123; … &#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> (min-width:<span class="number">500px</span>) </span>&#123; … &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 以下两个样式表是等价的 */</span></span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> (orientation: portrait) </span>&#123; … &#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> all and (orientation: portrait) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<p>许多的<code>media queries</code>可以构成一个媒体查询列表。对于以逗号分隔的<code>media queries</code>，只要其中一个或多个为<code>true</code>时我们的列表就为真，否则为<code>false</code>，在<code>media queries</code>语法中，逗号代表了逻辑或，而<code>and</code>关键字代表了逻辑与。</p>
<p><strong>实例六：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> screen and (color), projection and (color) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<p>如果媒体查询列表为空（或者说为空字符串或空白），它将被认为为真：</p>
<p><strong>实例七：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> all </span>&#123; … &#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<p>逻辑否可以通过<code>not</code>关键字。其实就是和编程一样啦，大家懂的，加上了<code>not</code>，假就是真，真就是假。</p>
<p><strong>实例八：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">media</span>=<span class="value">"not screen and (color)"</span> <span class="attribute">href</span>=<span class="value">"example.css"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>关键字<code>only</code>是用于隐藏老的用户代理的样式表。它的功能仅仅在于此了。而对于其他用户代理，处理以<code>only</code>开头的<code>media queries</code>时，要像<code>only</code>不存在一样。</p>
<p><strong>实例九：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">media</span>=<span class="value">"only screen and (color)"</span> <span class="attribute">href</span>=<span class="value">"example.css"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>media queries</code>语法可以用于<code>HTML</code>、<code>XHTML</code>、<code>XML</code>和<code>CSS</code>规则等<code>@media</code>和<code>@import</code>中。</p>
<p><strong>实例十：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> media=<span class="string">"screen and (color), projection and (color)"</span> rel=<span class="string">"stylesheet"</span> href=<span class="string">"example.css"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> media=<span class="string">"screen and (color), projection and (color)"</span> rel=<span class="string">"stylesheet"</span> href=<span class="string">"example.css"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;?xml-stylesheet media=<span class="string">"screen and (color), projection and (color)"</span> rel=<span class="string">"stylesheet"</span> href=<span class="string">"example.css"</span> ?&gt;</span><br><span class="line"></span><br><span class="line">@<span class="function">import <span class="title">url</span><span class="params">(example.css)</span> screen <span class="title">and</span> <span class="params">(color)</span>, projection <span class="title">and</span> <span class="params">(color)</span></span>;</span><br><span class="line"></span><br><span class="line">@<span class="function">media screen <span class="title">and</span> <span class="params">(color)</span>, projection <span class="title">and</span> <span class="params">(color)</span> </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<p>如果有一个媒体特性没有应用到当前正在运行的用户代理的设备上时，包含该表达式的媒体特性讲为假。</p>
<p><strong>实例十一：</strong></p>
<p>媒体特性<code>device-aspect-ratio</code>只应用于视觉设备，所以对于音频设备该表达式将永远为<code>false</code>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> media=<span class="string">"aural and (device-aspect-ratio: 16/9)"</span> href=<span class="string">"example.css"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>如果衡量单位没有应用于当前设备，表达式也将永远为<code>false</code>。</p>
<p><strong>实例十二：</strong></p>
<p><code>px</code>没有应用于<code>speech</code>媒体类型，所以下面的媒体查询将永远为<code>false</code>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> media=<span class="string">"speech and (min-device-width: 800px)"</span> href=<span class="string">"example.css"</span> /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="语法">语法</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">media_query_list</span><br><span class="line"> : S* [media_query [ <span class="string">','</span> S* media_query ]* ]?</span><br><span class="line"> ;</span><br><span class="line">media_query</span><br><span class="line"> : [ONLY | NOT]? S* media_type S* [ AND S* expression ]*</span><br><span class="line"> | expression [ AND S* expression ]*</span><br><span class="line"> ;</span><br><span class="line">media_type</span><br><span class="line"> : IDENT</span><br><span class="line"> ;</span><br><span class="line">expression</span><br><span class="line"> : <span class="string">'('</span> S* media_feature S* [ <span class="string">':'</span> S* expr ]? <span class="string">')'</span> S*</span><br><span class="line"> ;</span><br><span class="line">media_feature</span><br><span class="line"> : IDENT</span><br><span class="line"> ;</span><br></pre></td></tr></table></figure>
<h2 id="错误处理">错误处理</h2><p>对于不遵循用户代理的<code>media queries</code>需要遵守本节中描述的规则。</p>
<ul>
<li>未知媒体类型：未知媒体类型被计算为<code>false</code>。它可以有效的被认为是不匹配当前设备类型的媒体类型。</li>
<li>未知媒体特性：当某个指定的媒体特性不知道时，用户代理将媒体查询相当于<code>not all</code></li>
</ul>
<p><strong>实例十五：</strong></p>
<p>在这个例子中，第一个媒体查询将相当于<code>not all</code>，并且计算为<code>false</code>，第二个媒体查询计算时就好像第一个媒体查询不存在。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">media</span>=<span class="value">"screen and (max-weight: 3kg) and (color), (color)"</span> <span class="attribute">href</span>=<span class="value">"example.css"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>未知媒体特性值：和未知媒体特性一样，用户代理会将媒体查询相当于<code>not all</code>，当某个媒体特性值不知道时。</li>
</ul>
<p><strong>实例：</strong></p>
<p>因为在<code>max-width</code>中负值是不允许的，所以相当于<code>not all</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> (min-width: -<span class="number">100px</span>) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>畸形的媒体查询：具有意外的<code>token</code>的媒体查询相当于<code>not all</code>。</li>
</ul>
<p><strong>实例：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> (example, all,), speech </span>&#123; <span class="comment">/* only applicable to speech devices */</span> &#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> &amp;test, screen           </span>&#123; <span class="comment">/* only applicable to screen devices */</span> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="媒体特性">媒体特性</h2><p>在句法上，媒体特性类似于<code>CSS</code>属性：它们有名字并且接受确定的值。然而，属性和媒体特性之间也有几点重要到不同：</p>
<ul>
<li>属性被用于声明给文档提供信息从而如何呈现文档。而媒体特性则是一些表达式用于描述对于输出设备的要求。</li>
<li>许多的媒体特性能够接受可选的<code>min-</code>和<code>max-</code>前缀来表达<code>大于等于</code>或<code>小于等于</code>。这种语法的使用是为了阻止<code>&lt;</code>和<code>&gt;</code>字符与<code>HTML</code>和<code>XML</code>冲突。这些媒体特性经常使用前缀来使用，当然也会单独使用了。</li>
<li>属性总是需要一个值才能形成一个声明，另一方面，媒体特性也能不需要值。对于一个媒体特性，如果<code>(feature: x)</code>有一个值<code>x</code>，且<code>x</code>是除了0或0加上一个单位的值时，则<code>(feature)</code>会计算为<code>true</code>。而对于使用<code>min-</code>和<code>max-</code>前缀的媒体特性则必须使用一个值。当一个媒体特性用到了<code>min-</code>和<code>max-</code>前缀时，这会被认为是一个畸形的媒体查询。</li>
<li>属性可以接收更多复杂的值，例如，通过其他值计算出来的值。而媒体特性只能接受单一的值：一个关键字、一个数字或者一个数字带有一个单位。</li>
</ul>
<h3 id="width">width</h3><ul>
<li>取值：<code>&lt;length&gt;</code></li>
<li>应用于：视觉或触觉媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p><code>width</code>媒体特性描述了输出设备目标显示区域的宽度。对于一个连续媒体，这个就是视口(<code>viewport</code>)的宽度，并且包含了滚动条的宽度（如果有的话）。对于分页媒体，这是页框的宽度。</p>
<p>需要注意的是，<code>&lt;length&gt;</code>不能为负值。</p>
<p><strong>实例：</strong></p>
<p>下面的实例说明样式表只能应用于打印输出大于25cm的设备。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">media</span>=<span class="value">"print and (min-width: 25cm)"</span> <span class="attribute">href</span>=<span class="value">"http://…"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>实例：</strong></p>
<p>这个实例说明样式表只能应用于视口宽度在<code>400px</code>和<code>700px</code>之间的设备。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> screen and (min-width: <span class="number">400px</span>) and (max-width: <span class="number">700px</span>) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<p><strong>实例：</strong></p>
<p>这个实例说明样式应用于<code>handheld</code>和<code>screen</code>媒体类型，且最小宽度为<code>20em</code>，<code>em</code>是相对于初始的<code>font-size</code>值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> handheld and (min-width: <span class="number">20em</span>), </span><br><span class="line">  screen and (min-width: <span class="number">20em</span>) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<h3 id="height">height</h3><ul>
<li>取值：<code>&lt;length&gt;</code></li>
<li>应用于：视觉或触觉媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p><code>height</code>媒体特性和<code>width</code>几乎一样（但是height不常用），只是宽度与高度的区别，它同样包含了页面的水平方向滚动条的高度（如果有的话）。</p>
<p>负值也是不允许对。</p>
<h3 id="device-width">device-width</h3><ul>
<li>取值：<code>&lt;length&gt;</code></li>
<li>应用于：视觉或触觉媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p><code>device-width</code>媒体特性描述的是输出设备呈现表面的宽度（和<code>width</code>还是有很大区别的，对于连续媒体，<code>width</code>是指视口的宽度）。对于连续媒体，<code>device-width</code>指的是屏幕的宽度，对于分页媒体，这是页面纸张尺寸的宽度。</p>
<p>负值是不允许的。</p>
<p><code>device-width</code>一般是用于移动端。</p>
<p>实例：</p>
<p>下面的例子表明样式表应用于媒体类型为<code>screen</code>，且水平宽度为<code>800px</code>的设备。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> screen and (device-width: <span class="number">800px</span>) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<h3 id="device-height">device-height</h3><ul>
<li>取值：<code>&lt;length&gt;</code></li>
<li>应用于：视觉或触觉媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p><code>device-height</code>媒体特性描述的是输出设备呈现表面的高度。对于连续的媒体，这是屏幕的高度。对于分页媒体，这是页面纸张尺寸的高度。</p>
<p>负值是不允许的。</p>
<p><strong>实例：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">media</span>=<span class="value">"screen and (device-height: 600px)"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="orientation">orientation</h3><ul>
<li>取值：<code>portrait | landscape</code></li>
<li>应用于：位图媒体类型</li>
<li>接受<code>min/max</code>前缀：否</li>
</ul>
<p><code>orientation</code>一般是用于检测移动端是横向还是竖向的。当<code>height</code>的值大于等于<code>width</code>的媒体特性值时，<code>orientation</code>的值为<code>portrait</code>，否则为<code>landscape</code>。</p>
<p>实例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> all and (orientation:portrait) </span>&#123; … &#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> all and (orientation:landscape) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<h3 id="aspect-ratio">aspect-ratio</h3><ul>
<li>取值：<code>&lt;value&gt;</code></li>
<li>应用于：位图媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p><code>aspect-ratio</code>描述了输出设备目标显示区域的宽高比。该值包含两个以<code>/</code>分隔的正整数。代表了水平像素数（第一个值）与垂直像素数（第二个值）的比例。</p>
<p><strong>实例：</strong></p>
<p>下面为显示区域宽高至少为一比一的设备选择了一个特殊的样式表。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> screen and (min-aspect-ratio: <span class="number">1</span>/<span class="number">1</span>) </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>
<h3 id="device-aspect-ratio">device-aspect-ratio</h3><ul>
<li>取值：<code>&lt;value&gt;</code></li>
<li>应用于：位图媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p>这个和<code>aspect-ratio</code>很类似，描述的是输出设备的宽高比。该值包含两个以<code>/</code>分隔的正整数。代表了水平像素数（第一个值）与垂直像素数（第二个值）的比例。</p>
<p><strong>实例：</strong></p>
<p>例如，如果一个设备的屏幕媒体特性中，宽度为<code>1280px</code>，高度为<code>720px</code>，也就是等于<code>16/9</code>，则以下的所有媒体查询将匹配它：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> screen and (device-aspect-ratio: <span class="number">16</span>/<span class="number">9</span>) </span>&#123; … &#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> screen and (device-aspect-ratio: <span class="number">32</span>/<span class="number">18</span>) </span>&#123; … &#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> screen and (device-aspect-ratio: <span class="number">1280</span>/<span class="number">720</span>) </span>&#123; … &#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> screen and (device-aspect-ratio: <span class="number">2560</span>/<span class="number">1440</span>) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<h3 id="color">color</h3><ul>
<li>取值：<code>&lt;integer&gt;</code></li>
<li>应用于：视觉媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p><code>color</code>指定输出设备每个像素单元的比特值。如果设备不支持输出颜色，则该值为0。</p>
<p><code>&lt;integet&gt;</code>不能为负值。</p>
<p>这个媒体特性用的也是比较少的。</p>
<p><strong>实例：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> all and (color) </span>&#123; … &#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span> all and (min-color: <span class="number">1</span>) </span>&#123; … &#125;</span><br></pre></td></tr></table></figure>
<h3 id="color-index">color-index</h3><ul>
<li>取值：<code>&lt;integer&gt;</code></li>
<li>应用于：视觉媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p><code>color-index</code>指定了输出设备中颜色查询表中的条目数量。</p>
<p><strong>实例：</strong></p>
<p>向所有使用至少256个索引颜色的设备应用样式表：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel="stylesheet" media="all and (min-color-index: 256)" href="http://foo.bar.com/stylesheet.css" /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="monochrome">monochrome</h3><ul>
<li>取值：<code>&lt;integer&gt;</code></li>
<li>应用于：视觉媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p>指定了一个黑白（灰度）设备每个像素的比特数。如果不是黑白设备，值为0。</p>
<p><strong>实例：</strong></p>
<p>向每个像素至少8比特的黑白设备应用样式表：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> all and (min-monochrome: <span class="number">8</span>) </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>
<h3 id="resolution">resolution</h3><ul>
<li>取值：<code>&lt;resolution&gt;</code></li>
<li>应用于：位图媒体类型</li>
<li>接受<code>min/max</code>前缀：是</li>
</ul>
<p><code>resolution</code>指定输出设备的分辨率（像素密度）。分辨率可以用每英寸（dpi）或每厘米（dpcm）的点数来表示。</p>
<p><strong>实例：</strong></p>
<p>为每英寸至多300点的打印机应用样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> print and (min-resolution: <span class="number">300dpi</span>) </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>
<h3 id="scan">scan</h3><ul>
<li>取值：<code>progressive | interlace</code></li>
<li>应用于：<code>tv</code>媒体类型</li>
<li>接受<code>min/max</code>前缀：否</li>
</ul>
<p><code>scan</code>描述了电视输出设备的扫描过程。</p>
<p><strong>实例：</strong></p>
<p>向以顺序方式扫描的电视机上应用样式表：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> tv and (scan: progressive) </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>
<h3 id="grid">grid</h3><ul>
<li>取值：<code>&lt;integer&gt;</code></li>
<li>应用于：视觉或触觉媒体类型</li>
<li>接受<code>min/max</code>前缀：否</li>
</ul>
<p><code>grid</code>判断输出设备是网格设备还是位图设备。如果设备是基于网格的（例如电传打字机终端或只能显示一种字形的电话），该值为1，否则为0。</p>
<p>对于<code>grid</code>，有效的值只有<code>1</code>和<code>0</code>。其他一切都会创建一个畸形都媒体查询。</p>
<p><strong>实例：</strong></p>
<p>向一个15字符宽度或更窄的手持设备应用样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> handheld and (grid) and (max-width: <span class="number">15em</span>) </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>
<p>标准中还包括了一些值、单位的介绍，这里就不一一说了，具体还是<a href="http://www.w3.org/TR/css3-mediaqueries/" target="_blank" rel="external">点我吧</a></p>
<p>需要看媒体查询的一些例子，可以看看这里：<a href="http://mediaqueri.es/" target="_blank" rel="external">http://mediaqueri.es/</a></p>
<p>还可以看看W3Cplus的文章：<a href="http://www.w3cplus.com/content/css3-media-queries" target="_blank" rel="external">http://www.w3cplus.com/content/css3-media-queries</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/CSS/">CSS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/CSS3/">CSS3</a><a href="/tags/Media-Query/">Media Query</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/01/07/css3-media-query/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/01/07/css3-media-query/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="顯示側邊欄"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隱藏側邊欄"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分類</p>
		<ul>
		
		  
			<li><a href="/categories/CSS/" title="CSS">CSS<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaScript/" title="JavaScript">JavaScript<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>3</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">標簽</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/CSS3/" title="CSS3">CSS3<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/iOS/" title="iOS">iOS<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Flexbox/" title="Flexbox">Flexbox<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Transform/" title="Transform">Transform<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Media-Query/" title="Media Query">Media Query<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Animation/" title="Animation">Animation<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/selector/" title="selector">selector<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情鏈接</p>
    <ul>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 訂閱</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> keep coding <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/https://github.com/cookfront" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		<a href="mailto:cookfront@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2015 
		
		<a href="http://cookfront.github.io/about" target="_blank" title="cookfront@gmail.com">cookfront@gmail.com</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"cookfront"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 









<!-- Analytics Begin -->



<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1e9fdadfaa36dffc9a8914a1220e8161' type='text/javascript'%3E%3C/script%3E"));
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回頂部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
